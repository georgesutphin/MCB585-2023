















<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="last-modified" content="2020-09-09 08:35:47 -0700">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- meta "search-domain" used for google site search function google_search() -->
    <meta name="search-domain" value="">
    <link rel="stylesheet" type="text/css" href="../assets/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/lesson.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/syntax.css" />

    



    <!-- Favicons for everyone -->
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../assets/favicons/mcb585/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/favicons/mcb585/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/favicons/mcb585/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/favicons/mcb585/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../assets/favicons/mcb585/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../assets/favicons/mcb585/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../assets/favicons/mcb585/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../assets/favicons/mcb585/apple-touch-icon-152x152.png" />
    <link rel="icon" type="image/png" href="../assets/favicons/mcb585/favicon-196x196.png" sizes="196x196" />
    <link rel="icon" type="image/png" href="../assets/favicons/mcb585/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/png" href="../assets/favicons/mcb585/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="../assets/favicons/mcb585/favicon-16x16.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="../assets/favicons/mcb585/favicon-128.png" sizes="128x128" />
    <meta name="application-name" content=" - MCB 585: Multidisciplinary/Quantitative Approaches to Solving Biological Problems"/>
    <meta name="msapplication-TileColor" content="#FFFFFF" />
    <meta name="msapplication-TileImage" content="../assets/favicons/mcb585/mstile-144x144.png" />
    <meta name="msapplication-square70x70logo" content="../assets/favicons/mcb585/mstile-70x70.png" />
    <meta name="msapplication-square150x150logo" content="../assets/favicons/mcb585/mstile-150x150.png" />
    <meta name="msapplication-wide310x150logo" content="../assets/favicons/mcb585/mstile-310x150.png" />
    <meta name="msapplication-square310x310logo" content="../assets/favicons/mcb585/mstile-310x310.png" />


    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
    <title>MCB 585: Multidisciplinary/Quantitative Approaches to Solving Biological Problems: Getting started with R and RStudio -- Additional Detail</title>
  </head>
  <body>

    



    <div class="container">
      






<nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      
      
      <a href="https://georgesutphin.github.io/MCB585/" class="pull-left">
        <img class="navbar-logo" src="../assets/img/mcb585-logo.svg" alt="MCB585 logo" />
      </a>
      

      
      <a class="navbar-brand" href="../">Home</a>

    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">

	
        <li><a href="../CODE_OF_CONDUCT.html">Code of Conduct</a></li>

        
	
        <li><a href="../setup.html">Setup</a></li>

        
        <li class="dropdown">
          <a href="../" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Episodes <span class="caret"></span></a>
          <ul class="dropdown-menu">
            
            <li><a href="../01-class-introduction/index.html">Getting started with R and RStudio</a></li>
            
            <li><a href="../01-oyo-introduction/index.html">Getting started with R and RStudio -- Additional Detail</a></li>
            
            <li><a href="../02-class-R-data-types-structures/index.html">Basic Data Types and Data Structures in R</a></li>
            
            <li><a href="../02-oyo-R-data-types-in-depth/index.html">R Data Types -- In-Depth</a></li>
            
            <li><a href="../03-class-data-frames/index.html">Data Frames, Basic Indexing, Reading/Writing Data</a></li>
            
            <li><a href="../03-oyo-Lists/index.html">Lists and Advanced Indexing</a></li>
            
            <li><a href="../04-class-manipulating-plotting-data/index.html">Manipulating and Plotting Data</a></li>
            
            <li><a href="../04-oyo-advanced-data-manipulation/index.html">Advanced Data Manipulation and Plotting</a></li>
            
            <li><a href="../05-class-decisions-loops/index.html">Decision Making and Loops</a></li>
            
            <li><a href="../05-oyo-more-decisions-loops/index.html">Decision Making and Loops -- Additional Detail</a></li>
            
            <li><a href="../06-class-distributions/index.html">Distributions and Normality</a></li>
            
            <li><a href="../06-oyo-more-distributions/index.html">Distributions and Normality -- Additional Detail</a></li>
            
            <li><a href="../07-class-hypothesis-testing/index.html">Hypothesis Testing</a></li>
            
            <li><a href="../07-oyo-multiple-test-correction/index.html">Multiple Test Correction</a></li>
            
            <li><a href="../08-class-survival-analysis/index.html">Survival Analysis</a></li>
            
            <li><a href="../08-oyo-advanced-survival-analysis/index.html">Advanced Survival Analysis</a></li>
            
            <li><a href="../09-class-power-analysis/index.html">Power Analysis</a></li>
            
            <li><a href="../09-oyo-simulation/index.html">Simulating Experiments</a></li>
            
            <li><a href="../99-projects/index.html">Final Projects</a></li>
            
	    <li role="separator" class="divider"></li>
            <li><a href="../aio.html">All in one page (Beta)</a></li>
          </ul>
        </li>
	

	
	<!--
        <li class="dropdown">
          <a href="../" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Extras <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="../reference.html">Reference</a></li>
            
            <li><a href="../about/">About</a></li>
            
            <li><a href="../discuss/">Discussion</a></li>
            
            <li><a href="../figures/">Figures</a></li>
            
            <li><a href="../guide/">Instructor Notes</a></li>
            
          </ul>
        </li>
	-->

	
        <li><a href="../LICENSE.html">About</a></li>
	<!--
	
	<li><a href="/edit//_episodes_rmd/01-oyo-introduction.Rmd">Improve this page <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a></li>
	
	-->
      </ul>
      <form class="navbar-form navbar-right" role="search" id="search" onsubmit="google_search(); return false;">
        <div class="form-group">
          <input type="text" id="google-search" placeholder="Search..." aria-label="Google site search">
        </div>
      </form>
    </div>
  </div>
</nav>

















<div class="row">
  <div class="col-xs-1">
    <h3 class="text-left">
      
      <a href="../01-class-introduction/index.html"><span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span><span class="sr-only">previous episode</span></a>
      
    </h3>
  </div>
  <div class="col-xs-10">
    
    <h3 class="maintitle"><a href="../">MCB 585: Multidisciplinary/Quantitative Approaches to Solving Biological Problems</a></h3>
    
  </div>
  <div class="col-xs-1">
    <h3 class="text-right">
      
      <a href="../02-class-R-data-types-structures/index.html"><span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span><span class="sr-only">next episode</span></a>
      
    </h3>
  </div>
</div>

<article>
<div class="row">
  <div class="col-md-1">
  </div>
  <div class="col-md-10">
    <h1 class="maintitle">Getting started with R and RStudio -- Additional Detail</h1>
  </div>
  <div class="col-md-1">
  </div>
</div>


<blockquote class="objectives">
  <h2>Overview</h2>

  <div class="row">
    <div class="col-md-3">
      <strong>Class Date:</strong> 8/26/2020 -- On Your Own
      <br/>
      <strong>Teaching:</strong> 90 min
      <br/>
      <strong>Exercises:</strong> 30 min
    </div>
    <div class="col-md-9">
      <strong>Questions</strong>
      <ul>
	
	<li><p>How can I write R code that other people can understand and use?</p>
</li>
	
	<li><p>How do I manage the variables, files, and memory usage in my workspace?</p>
</li>
	
	<li><p>How do I write my own functions?</p>
</li>
	
	<li><p>How do I install and load packages to access application-specific tools?</p>
</li>
	
	<li><p>Where can I get help?</p>
</li>
	
      </ul>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3">
    </div>
    <div class="col-md-9">
      <strong>Objectives</strong>
      <ul>
	
	<li><p>Employ best practices for documenting code so that others can follow your work.</p>
</li>
	
	<li><p>Identify and segregate distinct components in your code using # or #-.</p>
</li>
	
	<li><p>Understand the importance about requirements and dependencies for your code.</p>
</li>
	
	<li><p>Learn how to remove variables from the workspace.</p>
</li>
	
	<li><p>Learn how to free up memory for projects using large data files.</p>
</li>
	
	<li><p>Know the basic syntax for writing and executing your own functions.</p>
</li>
	
	<li><p>Know how to install and load packages.</p>
</li>
	
	<li><p>Know what resources are available if you get stuck online and at the University of Arizona.</p>
</li>
	
      </ul>
    </div>
  </div>

</blockquote>

<hr />
<h2 id="on-your-own">On Your Own</h2>

<h3 id="best-practices-when-writing-code-in-r-and-in-general">Best practices when writing code in R (and in general)</h3>

<p>What if I handed you this and asked you to explain it:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">newX</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">aperm</span><span class="p">(</span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">s.call</span><span class="p">,</span><span class="w"> </span><span class="n">s.ans</span><span class="p">))</span><span class="w">
    </span><span class="nf">dim</span><span class="p">(</span><span class="n">newX</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="nf">prod</span><span class="p">(</span><span class="n">d.call</span><span class="p">),</span><span class="w"> </span><span class="n">d2</span><span class="p">)</span><span class="w">
    </span><span class="n">ans</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">vector</span><span class="p">(</span><span class="s2">"list"</span><span class="p">,</span><span class="w"> </span><span class="n">d2</span><span class="p">)</span><span class="w">
    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">length</span><span class="p">(</span><span class="n">d.call</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">2L</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">length</span><span class="p">(</span><span class="n">dn.call</span><span class="p">))</span><span class="w"> 
            </span><span class="nf">dimnames</span><span class="p">(</span><span class="n">newX</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">dn.call</span><span class="p">,</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="kc">NULL</span><span class="p">))</span><span class="w">
        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">1L</span><span class="o">:</span><span class="n">d2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="n">tmp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">forceAndCall</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">FUN</span><span class="p">,</span><span class="w"> </span><span class="n">newX</span><span class="p">[,</span><span class="w"> </span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">...</span><span class="p">)</span><span class="w">
            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nf">is.null</span><span class="p">(</span><span class="n">tmp</span><span class="p">))</span><span class="w"> 
                </span><span class="n">ans</span><span class="p">[[</span><span class="n">i</span><span class="p">]]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">tmp</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="k">else</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">1L</span><span class="o">:</span><span class="n">d2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">tmp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">forceAndCall</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">FUN</span><span class="p">,</span><span class="w"> </span><span class="n">array</span><span class="p">(</span><span class="n">newX</span><span class="p">[,</span><span class="w"> </span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">d.call</span><span class="p">,</span><span class="w"> 
            </span><span class="n">dn.call</span><span class="p">),</span><span class="w"> </span><span class="n">...</span><span class="p">)</span><span class="w">
        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nf">is.null</span><span class="p">(</span><span class="n">tmp</span><span class="p">))</span><span class="w"> 
            </span><span class="n">ans</span><span class="p">[[</span><span class="n">i</span><span class="p">]]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">tmp</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">ans.list</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">is.recursive</span><span class="p">(</span><span class="n">ans</span><span class="p">[[</span><span class="m">1L</span><span class="p">]])</span><span class="w">
    </span><span class="n">l.ans</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">ans</span><span class="p">[[</span><span class="m">1L</span><span class="p">]])</span><span class="w">
    </span><span class="n">ans.names</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">names</span><span class="p">(</span><span class="n">ans</span><span class="p">[[</span><span class="m">1L</span><span class="p">]])</span><span class="w">
</span></code></pre></div></div>

<p> </p>

<p>Got it? Yeah, me neither. For the most part, if you give raw code to someone else, this is what it will look like to them. With time and a lot of messing around, they could probably figure it out, but there is a better way.</p>

<p>Over time, the coding community has developed a set of best practices to follow when writing code to ease the confusion and frustration when someone else tries to read and interpret that code. This isn’t just for other people. In a year, that other person trying to interpret your code may be future you.</p>

<p> 
Before we start, here is exercise to illustrate the point on even a simple example:</p>

<blockquote class="challenge">
  <h2 id="best-coding-practices">Best coding practices</h2>

  <p>Here are what I would consider bad and good practices in coding:</p>

  <p><strong>Bad:</strong></p>

  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># assignvalues, then average</span><span class="w">
</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">21</span><span class="w">
</span><span class="n">value2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">26</span><span class="w">
</span><span class="n">bob</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">value2</span><span class="p">)</span><span class="o">/</span><span class="m">2</span><span class="w">
</span><span class="n">bob</span><span class="w">
</span></code></pre></div>  </div>

  <p><strong>Good:</strong></p>

  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># This script will average the body weights of two mice.</span><span class="w">

</span><span class="c1"># First enter the body weights of two mice (in grams!)</span><span class="w">
</span><span class="n">bw.mouse1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">21</span><span class="w">
</span><span class="n">bw.mouse2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">26</span><span class="w">

</span><span class="c1"># Next calculate the average body weight of the two mice</span><span class="w">
</span><span class="n">bw.average</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">bw.mouse1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">bw.mouse2</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span><span class="w">

</span><span class="c1"># Output the average body weight</span><span class="w">
</span><span class="n">bw.average</span><span class="w">
</span></code></pre></div>  </div>

  <p>Compare the “Good” and “Bad” examples. What aspects of the “Good” 
code help you understand the script?</p>

  <blockquote class="solution">
    <h2 id="solution">Solution</h2>

    <p>Here are some things that I came up with:</p>
    <ul>
      <li>Comments are clear and describe the goals of each step of the code.</li>
      <li>Header comments summarizes the overall goal of the entire script.</li>
      <li>Comments are frequent and explain specific steps.</li>
      <li>Variable names are descriptive.</li>
      <li>Variable name formats are consistent.</li>
      <li>Steps are visually separated by blank lines to add structure.</li>
      <li>Spaces are added to equations to add structure.</li>
    </ul>
  </blockquote>
</blockquote>

<p> </p>

<p>Here are a few habits to develop that will improve your relationship with other coders and your future selves:</p>

<p> </p>
<h4 id="annotation--headers-with-key-meta-data-about-the-script">Annotation – Headers with key meta-data about the script</h4>

<p>In the first lesson we briefly mentioned the primary tool in keeping your code organized: the <code class="language-plaintext highlighter-rouge">#</code> comment operator. Annotate your code thoroughly. Use the <code class="language-plaintext highlighter-rouge">#</code> to add text to your code that will be ignored by the computer, but helpful to another person trying to figure out just what you did.</p>

<p>The goal is to allow someone who has never looked at your script before to understand what you are trying to accomplish. Just putting <em>something</em> down is not enough. Include enough detail to make them understand.</p>

<p>In addition to adding comments to describe individual actions, adding a detailed header that outlines the purpose and usage of a script is very helpful to frame you analysis. Starting your code with an annotated description of what the code does will also help you when you revisit or change the script in the future. Just a line or two at the beginning of the file can save a lot of time and effort when trying to understand what a particular script does.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># This is code to replicate the analyses and figures from my 2014 Science</span><span class="w">
</span><span class="c1"># paper. Code developed by Sarah Supp, Tracy Teal, and Jon Borelli. Last</span><span class="w">
</span><span class="c1"># updated 8/22/2019.</span><span class="w">
</span></code></pre></div></div>

<p> </p>

<p>Actually, even this is a bit vague.</p>
<ul>
  <li>Which science paper? Can you provide a link or Pubmed ID?</li>
  <li>Which analysis in that paper?</li>
  <li>What is the purpose of the analysis?</li>
  <li>Which figure(s) are being reproduced?</li>
</ul>

<p>Any detail that you can add will help you down the line.</p>

<p> </p>
<h4 id="be-explicit-about-the-requirements-and-dependencies-of-your-code">Be explicit about the requirements and dependencies of your code</h4>

<p>Many scripts will require tools that are not available in the the base R language and will require one or more add-on packages. There are hundreds of packages available for numerous specialized applications, and we will be using several in this course. Installing and loading these packages is outlined below.</p>

<p>Loading any necessary packages up front (using <code class="language-plaintext highlighter-rouge">library</code>) is a nice way of indicating which packages are necessary to run your code. It can be frustrating to make it two-thirds of the way through a long-running script only to find out that a critical dependency hasn’t been installed. It is good practice to load all required pacakges early in your script using a section like this:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Load required packages</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">reshape</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">vegan</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p> </p>

<p>Another way you can be explicit about the requirements of your code and improve its reproducibility is to limit the “hard-coding” of the input and output files for your script. If your code will read in data from a file, define a variable early in your code that stores the path to that file:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">input_file</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"data/data.csv"</span><span class="w"> 
</span><span class="n">output_file</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"data/results.csv"</span><span class="w">

</span><span class="c1"># read input</span><span class="w">
</span><span class="n">input_data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="n">input_file</span><span class="p">)</span><span class="w">

</span><span class="c1"># get number of samples in data</span><span class="w">
</span><span class="n">sample_number</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">nrow</span><span class="p">(</span><span class="n">input_data</span><span class="p">)</span><span class="w">

</span><span class="c1"># generate results</span><span class="w">
</span><span class="n">results</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">some_other_function</span><span class="p">(</span><span class="n">input_file</span><span class="p">,</span><span class="w"> </span><span class="n">sample_number</span><span class="p">)</span><span class="w">

</span><span class="c1"># write results</span><span class="w">
</span><span class="n">write.table</span><span class="p">(</span><span class="n">results</span><span class="p">,</span><span class="w"> </span><span class="n">output_file</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p> </p>

<p>This is preferable to repeatedly writing out the input file paths (and way easier to update if you move or rename one of your files):</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># check</span><span class="w">
</span><span class="n">input_data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"data/data.csv"</span><span class="p">)</span><span class="w">

</span><span class="c1"># get number of samples in data</span><span class="w">
</span><span class="n">sample_number</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">nrow</span><span class="p">(</span><span class="n">input_data</span><span class="p">)</span><span class="w">

</span><span class="c1"># generate results</span><span class="w">
</span><span class="n">results</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">some_other_function</span><span class="p">(</span><span class="s2">"data/data.csv"</span><span class="p">,</span><span class="w"> </span><span class="n">sample_number</span><span class="p">)</span><span class="w">

</span><span class="c1"># write results</span><span class="w">
</span><span class="n">write.table</span><span class="p">(</span><span class="s2">"data/results.csv"</span><span class="p">,</span><span class="w"> </span><span class="n">output_file</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p> </p>
<h4 id="naming-conventions">Naming Conventions</h4>
<p>Historically, R programmers have used a variety of conventions for naming variables. The <code class="language-plaintext highlighter-rouge">.</code> character in R can be a valid part of a variable name; thus <code class="language-plaintext highlighter-rouge">weight.kg &lt;- 57.5</code> is a legitimate variable name.</p>

<p>This is often confusing to R newcomers who have programmed in languages where <code class="language-plaintext highlighter-rouge">.</code> has a more significant meaning. Today, most R programmers:</p>
<ol>
  <li>Start variable names with lower case letters</li>
  <li>Separate words in variable names with underscores</li>
  <li>Use only lowercase letters, underscores, and numbers in variable names.</li>
</ol>

<p>The book <em>R Packages</em> includes a <a href="http://r-pkgs.had.co.nz/style.html">chapter</a> on this and other style considerations.</p>

<p>How closely you follow these standards is up to you. As a good rule of thumb, choose a convention for naming R objects that is descriptive, that you can remember, and that you will stick to using.</p>

<p> </p>
<h4 id="identify-and-segregate-distinct-components-in-your-code">Identify and segregate distinct components in your code</h4>

<p>It’s easy to annotate and mark your code using <code class="language-plaintext highlighter-rouge">#</code> or <code class="language-plaintext highlighter-rouge">#-</code> to set off sections of your code and to make finding specific parts of your code easier. For example, it’s often helpful when writing code to separate the function definitions. If you create only one or a few custom functions in your script, put them toward the top of your code. If you have written many functions, put them all in their own .R file and then <code class="language-plaintext highlighter-rouge">source</code> those files. <code class="language-plaintext highlighter-rouge">source</code> will define all of these functions so that your code can make use of them as needed.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">source</span><span class="p">(</span><span class="s2">"my_genius_fxns.R"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p> </p>
<h4 id="other-ideas">Other ideas</h4>

<ol>
  <li>
    <p>Keep your code in bite-sized chunks. If a single function or loop gets too long, consider looking for ways to break it into smaller pieces (e.g. write functions to carry out chunks of code all in one line; break complex analyses into multiple loops with intermediate results saved in between).</p>
  </li>
  <li>
    <p>Don’t repeat yourself–automate! If you are repeating the same code over and over, use a loop or a function to repeat that code for you. Needless repetition doesn’t just waste time–it also increases the likelihood you’ll make a costly mistake.</p>
  </li>
  <li>
    <p>Keep all of your source files for a project in the same directory, then use relative paths as necessary to access them. For example, to load data use:</p>
  </li>
</ol>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># set working directory</span><span class="w">
</span><span class="n">setwd</span><span class="p">(</span><span class="s2">"C:/Users/Karthik/Documents/sannic-project"</span><span class="p">)</span><span class="w">

</span><span class="c1"># load datasets 1 and 2 from the files subfolder</span><span class="w">
</span><span class="n">dat</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"files/dataset1.csv"</span><span class="p">,</span><span class="w"> </span><span class="n">header</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span><span class="n">dat</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"files/dataset2.csv"</span><span class="p">,</span><span class="w"> </span><span class="n">header</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p> </p>

<p>rather than:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dat1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"C:/Users/Karthik/Documents/sannic-project/files/dataset1.csv"</span><span class="p">,</span><span class="w"> </span><span class="n">header</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">

</span><span class="n">dat2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"C:/Users/Karthik/Documents/sannic-project/files/dataset2.csv"</span><span class="p">,</span><span class="w"> </span><span class="n">header</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p> </p>

<ol start="4">
  <li>R can run into memory issues. It is a common problem to run out of memory after running R scripts for a long time. To inspect the objects in your current R environment, you can list the objects, search current packages, and remove objects that are currently not in use. A good practice when running long lines of computationally intensive code is to remove temporary objects after they have served their purpose. However, sometimes, R will not clean up unused memory for a while after you delete objects. You can force R to tidy up its memory by using <code class="language-plaintext highlighter-rouge">gc()</code> (discussed in more detail later).</li>
</ol>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Generate sample dataset of 1000 rows</span><span class="w">
</span><span class="n">interim_object</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="nf">rep</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">),</span><span class="w">
                             </span><span class="nf">rep</span><span class="p">(</span><span class="m">101</span><span class="o">:</span><span class="m">200</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">),</span><span class="w">
                             </span><span class="nf">rep</span><span class="p">(</span><span class="m">201</span><span class="o">:</span><span class="m">300</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">))</span><span class="w">

</span><span class="c1"># Report the memory size allocated to the object</span><span class="w">
</span><span class="n">object.size</span><span class="p">(</span><span class="n">interim_object</span><span class="p">)</span><span class="w">

</span><span class="c1"># Removes the object itself, but not necessarily the memory allotted to it</span><span class="w">
</span><span class="n">rm</span><span class="p">(</span><span class="s2">"interim_object"</span><span class="p">)</span><span class="w"> 

</span><span class="c1"># Force R to release memory it is no longer using</span><span class="w">
</span><span class="n">gc</span><span class="p">()</span><span class="w"> 
</span></code></pre></div></div>

<p> </p>

<ol start="6">
  <li>
    <p>Don’t save a session history (the default option in R, when it asks if you want an <code class="language-plaintext highlighter-rouge">RData</code> file). Instead, start in a clean environment so that older objects don’t remain in your environment any longer than they need to. If that happens, it can lead to unexpected results. Your script should explicitly load any data and create any variables that it needs, rather than relying on a variable that you assigned in the console panel sometime last week.</p>
  </li>
  <li>
    <p>Wherever possible, keep track of <code class="language-plaintext highlighter-rouge">sessionInfo()</code> somewhere in your project folder. Session information is invaluable because it captures all of the packages used in the current project. If a newer version of a package changes the way a function behaves, you can always go back and re-install the version that worked (Note: at least on CRAN, all older versions of packages are permanently archived).</p>
  </li>
</ol>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Take a look at the information provided by sessionInfo():</span><span class="w">
</span><span class="n">sessionInfo</span><span class="p">()</span><span class="w">

</span><span class="c1"># Here is how to save:</span><span class="w">
</span><span class="n">current.session</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sessionInfo</span><span class="p">()</span><span class="w">
</span><span class="n">session.file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">paste0</span><span class="p">(</span><span class="s2">"./Project X R Session Info for "</span><span class="p">,</span><span class="n">Sys.Date</span><span class="p">(),</span><span class="s2">".Rdata"</span><span class="p">)</span><span class="w">
</span><span class="n">save</span><span class="p">(</span><span class="n">current.session</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="o">=</span><span class="n">session.file</span><span class="p">)</span><span class="w">
</span><span class="n">rm</span><span class="p">(</span><span class="n">current.session</span><span class="p">)</span><span class="w">

</span><span class="c1"># ... and to load old files to look at them</span><span class="w">
</span><span class="n">load</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="n">session.file</span><span class="p">)</span><span class="w">
</span><span class="n">current.session</span><span class="w">
</span></code></pre></div></div>

<p> </p>

<ol start="8">
  <li>
    <p>Do not <em>ever</em> modify your original raw data files. Doing so risks overwriting or unintentionally modifying the values of your starting data. Instead, always save modified data under a new name. You can even set critical raw data files to Read Only in your operating system to prevent accidental overwriting.</p>
  </li>
  <li>
    <p>Collaborate. Grab a buddy and practice “code review”. Review is used for preparing experiments and manuscripts; why not use it for code as well? Code can easily be a major scientific achievement and the product of lots of hard work!</p>
  </li>
  <li>
    <p>Develop your code using version control and frequent updates! You can find lessons about version control on <a href="https://software-carpentry.org/lessons/">software-carpentry.org/lessons</a>.</p>
  </li>
</ol>

<hr />
<h3 id="cleaning-up">Cleaning up</h3>

<p>Keeping a tidy workspace can be just as critical when coding as when conducting experiments at the bench. Learning to code takes a lot or trial and error, particularly in the beginning. A well-designed script should be self-contained, meaning that you should be able to clear out all past variables, re-run the script from scratch, and arrive at the same outcome. Periodically clearing out your workspace of old variables prevents errors that occur when you accidentally use the same variable name in two different places, or accidentally overwrite a critical variable while testing a new function. There are a variety of tools available to help keep your workspace tidy.</p>

<p>You can use the <code class="language-plaintext highlighter-rouge">ls()</code> command to list all variables currently defined in your workspace.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># first define a couple of variables</span><span class="w">
</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">1</span><span class="w">
</span><span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">100</span><span class="w">

</span><span class="c1"># now look at what we have defined</span><span class="w">
</span><span class="n">ls</span><span class="p">()</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] "args"          "dest_md"       "missing_pkgs"  "required_pkgs"
[5] "src_rmd"       "x"             "y"            
</code></pre></div></div>

<p> </p>

<p>Try clicking on the brush icon in the Environment panel and clicking <kbd>Yes</kbd> in the pop-up box. What happened to your variables? What happens if you try to display the variable in the console?</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext error highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Error in eval(expr, envir, enclos): object 'x' not found
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">y</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext error highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Error in eval(expr, envir, enclos): object 'y' not found
</code></pre></div></div>

<p> </p>

<p>You can also remove variables one at a time.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># again, define a few test variables and check your workspace</span><span class="w">
</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="w">
</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">2</span><span class="w">
</span><span class="n">z1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">y</span><span class="w">
</span><span class="n">z2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span><span class="w">
</span><span class="n">ls</span><span class="p">()</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] "args"          "dest_md"       "missing_pkgs"  "required_pkgs"
[5] "src_rmd"       "x"             "y"             "z1"           
[9] "z2"           
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># remove x and y one at a time, then remove all remaining variables and</span><span class="w">
</span><span class="c1"># observe what happens to your workspace</span><span class="w">
</span><span class="n">rm</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">
</span><span class="n">ls</span><span class="p">()</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] "args"          "dest_md"       "missing_pkgs"  "required_pkgs"
[5] "src_rmd"       "y"             "z1"            "z2"           
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">rm</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="w">
</span><span class="n">ls</span><span class="p">()</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] "args"          "dest_md"       "missing_pkgs"  "required_pkgs"
[5] "src_rmd"       "z1"            "z2"           
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># remove all variables currently in environment (this won't work on the website, but try it in RStudio)</span><span class="w">
</span><span class="n">rm</span><span class="p">(</span><span class="n">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ls</span><span class="p">())</span><span class="w"> 
</span><span class="n">ls</span><span class="p">()</span><span class="w">
</span></code></pre></div></div>

<p> </p>

<p>Often when you get into more complex analyses in R, you end up with a lot of data stored in memory. In some cases, clearing the variable with <code class="language-plaintext highlighter-rouge">rm()</code> does not completely release all of the memory that R has allocated for that variable immediately. You can force R to release that memory using the <code class="language-plaintext highlighter-rouge">gc()</code> function, which stands for “Garbage Collection”.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Calling gc() is simple and forces R to release memory to the operating system</span><span class="w">
</span><span class="n">gc</span><span class="p">()</span><span class="w">
</span></code></pre></div></div>

<p> </p>

<p>Don’t get bogged down in the details, but we can check memory usage before 
creating, after creating, and after removing a large vector. The memory usage at 
each stage is indicated by “Vcells” (the V stands for “Vector”). Removing the object and running gc() frees up some of the memory. Note that <code class="language-plaintext highlighter-rouge">gc()</code> also gives you a memory usage report.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># check memory before creating vector</span><span class="w">
</span><span class="n">gc</span><span class="p">()</span><span class="w"> 
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>         used (Mb) gc trigger (Mb) max used (Mb)
Ncells 478554 25.6    1048005   56   638582 34.2
Vcells 905733  7.0    8388608   64  1632446 12.5
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># create a big vector (this can take some time) and recheck memory with </span><span class="w">
</span><span class="c1"># vector loaded; Vcells used (MB) goes up</span><span class="w">
</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">integer</span><span class="p">(</span><span class="m">100000</span><span class="p">);</span><span class="w"> </span><span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">100000</span><span class="p">)</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w">
</span><span class="n">gc</span><span class="p">()</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  478639 25.6    1048005   56   638582 34.2
Vcells 1006088  7.7    8388608   64  8388604 64.0
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># remove vector and check memory a final time; Vcells used (MB) returns to</span><span class="w">
</span><span class="c1"># it's original value</span><span class="w">
</span><span class="n">rm</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">
</span><span class="n">gc</span><span class="p">()</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>         used (Mb) gc trigger (Mb) max used (Mb)
Ncells 478610 25.6    1048005   56   638582 34.2
Vcells 905925  7.0    8388608   64  8388604 64.0
</code></pre></div></div>

<p> </p>

<p>You may find that this speeds up processing when you have a script that is repeatedly loading and releasing large data files.</p>

<p>It is generally good practice to start off each session with a clean slate. When you start RStudio, the Environment will be clear (unless you load a previously saved workspace). If you are finished with one analysis and starting another, it is a good idea to clear you Environment. That way if you reuse a variable name (e.g. <code class="language-plaintext highlighter-rouge">x</code>) you won’t accidentally end up using the value stored in your workspace during the previous analysis.</p>

<p> </p>
<h4 id="writing-your-own-functions">Writing your own functions</h4>

<p>A good way to consolidate code that you intend to use repeatedly is to build that code into a new function. Instead of repeating the entire set of code over and over, you can instead just call the function with a few commands.</p>

<p>Let’s define a new function <code class="language-plaintext highlighter-rouge">FtoC</code> that converts a temperature value in Fahrenheit (the <em>argument</em>) to Celsius (the <em>output</em>):</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">FtoC</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">temp_F</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">temp_C</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="p">(</span><span class="n">temp_F</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">32</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="m">5</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">9</span><span class="p">)</span><span class="w">
  </span><span class="nf">return</span><span class="p">(</span><span class="n">temp_C</span><span class="p">)</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p> </p>

<p>Now let’s give is a try:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">FtoC</span><span class="p">(</span><span class="m">32</span><span class="p">)</span><span class="w"> </span><span class="c1"># output to console</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 0
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Temp_C</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">FtoC</span><span class="p">(</span><span class="m">32</span><span class="p">)</span><span class="w"> </span><span class="c1"># assign the output to a new variable called Temp_C</span><span class="w">
</span><span class="n">Temp_C</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 0
</code></pre></div></div>

<p> </p>

<p>Functions can be just a few short lines (as above), or span thousands of lines of code employing many other functions.</p>

<p> </p>
<h4 id="installing-and-loading-packages">Installing and loading packages</h4>

<p>R comes preloaded with a decently wide range of functions for basic data manipulation, but you will inevitably want to do something more interesting. There are many, many ‘packages’ that are available online for download. Each package is a set of related functions designed for a specific area of analysis. For example, later in the course we will use specialized packages that contain functions for power analysis (the <code class="language-plaintext highlighter-rouge">pwr</code> package) and survival analysis (the <code class="language-plaintext highlighter-rouge">survival</code> package).</p>

<p>To use a package, you have to do two things:</p>
<ol>
  <li><strong>Install</strong> – Download the package from an external source, and make the functions accessible to R and RStudio. This is accomplished with the <code class="language-plaintext highlighter-rouge">install.packages()</code> function and only has to be done just per computer.</li>
  <li><strong>Load</strong> – Installing the package does not immediately allow you to access the associated functions. You first have to load the package into your local workspace. This is done with the <code class="language-plaintext highlighter-rouge">library()</code> function.</li>
</ol>

<p>Let’s give it a try by installing and loading the <code class="language-plaintext highlighter-rouge">pwr</code> package:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Install required packages</span><span class="w">
</span><span class="n">install.packages</span><span class="p">(</span><span class="s2">"pwr"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext error highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Warning in install.packages("pwr"): 'lib = "C:/Program Files/R/R-4.0.2/library"'
is not writable
</code></pre></div></div>

<div class="language-plaintext error highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Error in install.packages("pwr"): unable to install packages
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Load required packages into memory</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="s2">"pwr"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p> </p>

<p>Generally, a Google search will let you find packages for just about any type of analysis. These usually come from one of two sources (which R mostly takes care of automatically, with a few exceptions):</p>
<ul>
  <li><a href="https://cran.r-project.org/">CRAN</a> for basic R packages</li>
  <li><a href="https://www.bioconductor.org/">Bioconductor</a> for biological packages</li>
</ul>

<p>In situations where installing a package is more complicated that simply calling the <code class="language-plaintext highlighter-rouge">install.packages()</code> function from within RStudio, the installation instructions are generally listed near the top of the homepage or documentation associated with that package.</p>

<hr />
<h3 id="resources--where-to-turn-for-help">Resources – where to turn for help</h3>

<p>There are a variety of resources available when you have questions. Here are a few places to look:</p>

<p> </p>
<h4 id="getting-help-in-r">Getting help in R</h4>

<p>R has a built in function called <code class="language-plaintext highlighter-rouge">help()</code> that provides basic information about specific functions. You can either use this function like any other function, or use the <code class="language-plaintext highlighter-rouge">?</code> operator. Let’s give it a try to get more detailed information on how the <code class="language-plaintext highlighter-rouge">setwd()</code> function works.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">help</span><span class="p">(</span><span class="n">setwd</span><span class="p">)</span><span class="w">
</span><span class="o">?</span><span class="n">setwd</span><span class="w">
</span></code></pre></div></div>

<p> </p>

<p>When you enter either command, notice that the <strong>Help</strong> panel opens (lower right pane in RStudio). This panel provides information on the purpose, inputs, and outputs of the queried function. It also provides useful examples of how to use the function at the end of the documentation. <code class="language-plaintext highlighter-rouge">help()</code> is usually a good first place to look to get a feel for what a function is doing.</p>

<p> </p>
<h4 id="online-forums">Online Forums</h4>

<p>Perhaps the most valuable resource available to both basic and advanced R users is the vast online community. Many people are actively using the R language for a variety of analysis tasks. You will find that most questions have already been asked and answered on one of the various online forums. If you can’t find the answer, sign up for a forum and post your question. You will generally get an answer (or a pointer to another forum where the question has already been answered) within a day or two.</p>

<p>To find answers, the simplest way is to just type what you are trying to do into Google. Preceeding your question with “R” will tend to find questions within the R community:</p>

<p>      <em>R calculate standard deviation</em></p>

<p>There are many online forums with R user discussions, but I personally find the most common and useful to be <a href="https://stackoverflow.com/">stackoverflow</a>.</p>

<p> </p>
<h4 id="the-carpentries">The Carpentries</h4>

<p><a href="https://carpentries.org/">The Carpentries</a>, and <a href="https://software-carpentry.org/">Software Carpentry</a> in particular, offer free online introductory programming lessons for R and other languages. Much of the early part of this course is based on the Software Carpentry material. They are a good resource for those just delving into coding (or even just R) for the first time.</p>

<p> </p>
<h4 id="resources-at-the-university-of-arizona">Resources at the University of Arizona</h4>

<p>The University of Arizona has several resources for both statistics and programming:</p>
<ul>
  <li><a href="https://it.arizona.edu/documentation/statistical-resources">Statistics resources</a></li>
  <li><a href="https://it.arizona.edu/service/statistical-consulting">Statistics consulting</a> (pay service, free consultation)</li>
  <li><a href="https://statlab.bio5.org/">BIO5 StatLab</a> (pay service, free consultation)</li>
  <li><a href="https://cancercenter.arizona.edu/researchers/shared-resources/biostatistics">Cancer Center biostatistics</a></li>
  <li><a href="https://cancercenter.arizona.edu/researchers/shared-resources/bioinformatics">Cancer Center bioinformatics</a></li>
</ul>

<hr />



<blockquote class="keypoints">
  <h2>Key Points</h2>
  <ul>
    
    <li><p>Use <code class="language-plaintext highlighter-rouge">#</code> to add comments to programs.</p>
</li>
    
    <li><p>Annotate your code!</p>
</li>
    
    <li><p>Name and style code consistently.</p>
</li>
    
    <li><p>Break code into small, discrete pieces.</p>
</li>
    
    <li><p>Factor out common operations rather than repeating them.</p>
</li>
    
    <li><p>Keep all of the source files for a project in one directory and use relative paths to access them.</p>
</li>
    
    <li><p>Keep track of session information in your project folder.</p>
</li>
    
    <li><p>Start each program with a description of what it does.</p>
</li>
    
    <li><p>Load all required packages at the beginning of a script.</p>
</li>
    
    <li><p>Use <code class="language-plaintext highlighter-rouge">#----</code> comments to mark off sections of code.</p>
</li>
    
    <li><p>When working with large datasets, removing variables that you no longer need and releasing memory can improve performance.</p>
</li>
    
    <li><p>Writing functions for sets of commands that you will be running repeatedly will make your data processing more efficient.</p>
</li>
    
    <li><p>Use <code class="language-plaintext highlighter-rouge">install.packages()</code> to install new packages and <code class="language-plaintext highlighter-rouge">library()</code> to load and use installed packages in your current workspace.</p>
</li>
    
    <li><p>Use help() and ? to get basic information about functions.</p>
</li>
    
    <li><p>Online forums have the answers to almost any R-related question you can come up with. Know how to Google your question!</p>
</li>
    
    <li><p>The University of Arizona offers serveral resources to assist with both biostatistics and programming.</p>
</li>
    
  </ul>
</blockquote>

</article>
















<div class="row">
  <div class="col-xs-1">
    <h3 class="text-left">
      
      <a href="../01-class-introduction/index.html"><span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span><span class="sr-only">previous episode</span></a>
      
    </h3>
  </div>
  <div class="col-xs-10">
    
  </div>
  <div class="col-xs-1">
    <h3 class="text-right">
      
      <a href="../02-class-R-data-types-structures/index.html"><span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span><span class="sr-only">next episode</span></a>
      
    </h3>
  </div>
</div>


      
      






<footer>
  <!--<div class="row">
    <div class="col-md-6 copyright" align="left">
	
    </div>
    <div class="col-md-6 help-links" align="right">
	
	
	<a href="/edit//_episodes_rmd/01-oyo-introduction.Rmd">Edit on GitHub</a>
	
	
	/
	<a href="/blob//CONTRIBUTING.md">Contributing</a>
	/
	<a href="/">Source</a>
	/
	<a href="/blob//CITATION">Cite</a>
	/
	<a href="mailto:sutphin@gmail.com">Contact</a>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12" align="center">
      Using <a href="https://github.com/carpentries/styles/">The Carpentries style</a>
      version <a href="https://github.com/carpentries/styles/releases/tag/v9.5.3">9.5.3</a>.
    </div>
  </div>-->
</footer>

      
    </div>
    
<script src="../assets/js/jquery.min.js"></script>
<script src="../assets/js/bootstrap.min.js"></script>
<script src="../assets/js/lesson.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-37305346-2', 'auto');
  ga('send', 'pageview');
</script>
<!--<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>-->
<script type="text/javascript"
src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

  </body>
</html>
