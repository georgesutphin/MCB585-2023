















<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="last-modified" content="2024-08-15 20:50:19 -0700">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- meta "search-domain" used for google site search function google_search() -->
    <meta name="search-domain" value="">
    <link rel="stylesheet" type="text/css" href="../assets/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/lesson.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/syntax.css" />

    



    <!-- Favicons for everyone -->
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../assets/favicons/mcb585/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/favicons/mcb585/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/favicons/mcb585/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/favicons/mcb585/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../assets/favicons/mcb585/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../assets/favicons/mcb585/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../assets/favicons/mcb585/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../assets/favicons/mcb585/apple-touch-icon-152x152.png" />
    <link rel="icon" type="image/png" href="../assets/favicons/mcb585/favicon-196x196.png" sizes="196x196" />
    <link rel="icon" type="image/png" href="../assets/favicons/mcb585/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/png" href="../assets/favicons/mcb585/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="../assets/favicons/mcb585/favicon-16x16.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="../assets/favicons/mcb585/favicon-128.png" sizes="128x128" />
    <meta name="application-name" content=" - MCB 585: Multidisciplinary/Quantitative Approaches to Solving Biological Problems"/>
    <meta name="msapplication-TileColor" content="#FFFFFF" />
    <meta name="msapplication-TileImage" content="../assets/favicons/mcb585/mstile-144x144.png" />
    <meta name="msapplication-square70x70logo" content="../assets/favicons/mcb585/mstile-70x70.png" />
    <meta name="msapplication-square150x150logo" content="../assets/favicons/mcb585/mstile-150x150.png" />
    <meta name="msapplication-wide310x150logo" content="../assets/favicons/mcb585/mstile-310x150.png" />
    <meta name="msapplication-square310x310logo" content="../assets/favicons/mcb585/mstile-310x310.png" />


    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
    <title>MCB 585: Multidisciplinary/Quantitative Approaches to Solving Biological Problems: Data Frames, Basic Indexing, Reading/Writing Data</title>
  </head>
  <body>

    



    <div class="container">
      






<nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      
      
      <a href="https://georgesutphin.github.io/MCB585/" class="pull-left">
        <img class="navbar-logo" src="../assets/img/mcb585-logo.svg" alt="MCB585 logo" />
      </a>
      

      
      <a class="navbar-brand" href="../">Home</a>

    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">

	
        <li><a href="../CODE_OF_CONDUCT.html">Code of Conduct</a></li>

        
	
        <li><a href="../setup.html">Setup</a></li>

        
        <li class="dropdown">
          <a href="../" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Episodes <span class="caret"></span></a>
          <ul class="dropdown-menu">
            
            <li><a href="../01-class-introduction/index.html">Getting started with R and RStudio</a></li>
            
            <li><a href="../01-oyo-introduction/index.html">Getting started with R and RStudio -- Additional Detail</a></li>
            
            <li><a href="../02-class-R-data-types-structures/index.html">Basic Data Types and Data Structures in R</a></li>
            
            <li><a href="../02-oyo-R-data-types-in-depth/index.html">R Data Types -- In-Depth</a></li>
            
            <li><a href="../03-class-data-frames/index.html">Data Frames, Basic Indexing, Reading/Writing Data</a></li>
            
            <li><a href="../03-oyo-Lists/index.html">Lists and Advanced Indexing</a></li>
            
            <li><a href="../04-class-manipulating-plotting-data/index.html">Manipulating and Plotting Data</a></li>
            
            <li><a href="../04-oyo-advanced-data-manipulation/index.html">Advanced Data Manipulation and Plotting</a></li>
            
            <li><a href="../05-class-decisions-loops/index.html">Decision Making and Loops</a></li>
            
            <li><a href="../05-oyo-more-decisions-loops/index.html">Decision Making and Loops -- Additional Detail</a></li>
            
            <li><a href="../06-class-distributions/index.html">Distributions and Normality</a></li>
            
            <li><a href="../06-oyo-more-distributions/index.html">Distributions and Normality -- Additional Detail</a></li>
            
            <li><a href="../07-class-hypothesis-testing/index.html">Hypothesis Testing</a></li>
            
            <li><a href="../07-oyo-multiple-test-correction/index.html">Multiple Test Correction</a></li>
            
            <li><a href="../08-class-survival-analysis/index.html">Survival Analysis</a></li>
            
            <li><a href="../08-oyo-advanced-survival-analysis/index.html">Advanced Survival Analysis</a></li>
            
            <li><a href="../09-class-power-analysis/index.html">Power Analysis</a></li>
            
            <li><a href="../09-oyo-simulation/index.html">Simulating Experiments</a></li>
            
            <li><a href="../99-projects/index.html">Final Projects</a></li>
            
	    <li role="separator" class="divider"></li>
            <li><a href="../aio.html">All in one page (Beta)</a></li>
          </ul>
        </li>
	

	
	<!--
        <li class="dropdown">
          <a href="../" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Extras <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="../reference.html">Reference</a></li>
            
            <li><a href="../about/">About</a></li>
            
            <li><a href="../discuss/">Discussion</a></li>
            
            <li><a href="../figures/">Figures</a></li>
            
            <li><a href="../guide/">Instructor Notes</a></li>
            
          </ul>
        </li>
	-->

	
        <li><a href="../LICENSE.html">About</a></li>
	<!--
	
	<li><a href="/edit//_episodes_rmd/03-class-data-frames.Rmd">Improve this page <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a></li>
	
	-->
      </ul>
      <form class="navbar-form navbar-right" role="search" id="search" onsubmit="google_search(); return false;">
        <div class="form-group">
          <input type="text" id="google-search" placeholder="Search..." aria-label="Google site search">
        </div>
      </form>
    </div>
  </div>
</nav>

















<div class="row">
  <div class="col-xs-1">
    <h3 class="text-left">
      
      <a href="../02-oyo-R-data-types-in-depth/index.html"><span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span><span class="sr-only">previous episode</span></a>
      
    </h3>
  </div>
  <div class="col-xs-10">
    
    <h3 class="maintitle"><a href="../">MCB 585: Multidisciplinary/Quantitative Approaches to Solving Biological Problems</a></h3>
    
  </div>
  <div class="col-xs-1">
    <h3 class="text-right">
      
      <a href="../03-oyo-Lists/index.html"><span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span><span class="sr-only">next episode</span></a>
      
    </h3>
  </div>
</div>

<article>
<div class="row">
  <div class="col-md-1">
  </div>
  <div class="col-md-10">
    <h1 class="maintitle">Data Frames, Basic Indexing, Reading/Writing Data</h1>
  </div>
  <div class="col-md-1">
  </div>
</div>


<blockquote class="objectives">
  <h2>Overview</h2>

  <div class="row">
    <div class="col-md-3">
      <strong>Class Date:</strong> 8/31/2023 -- In Class
      <br/>
      <strong>Teaching:</strong> 90 min
      <br/>
      <strong>Exercises:</strong> 30 min
    </div>
    <div class="col-md-9">
      <strong>Questions</strong>
      <ul>
	
	<li><p>What is a data frame?</p>
</li>
	
	<li><p>How does indexing differ for data frames relative to basic data structures?</p>
</li>
	
	<li><p>How do I access data frame subsets?</p>
</li>
	
	<li><p>How do I read data from a .csv or .txt file into R?</p>
</li>
	
	<li><p>How do I write data to a .csv or .txt file?</p>
</li>
	
      </ul>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3">
    </div>
    <div class="col-md-9">
      <strong>Objectives</strong>
      <ul>
	
	<li><p>Understand the structure and properties of data frames in R.</p>
</li>
	
	<li><p>Select individual values and subsections from data.</p>
</li>
	
	<li><p>Perform operations on a data frame.</p>
</li>
	
	<li><p>Understand the three primary ways R can access data inside a data frame.</p>
</li>
	
	<li><p>Be able to apply the basic functions for reading and writing tabular data stored in common text file formats (.txt, .csv).</p>
</li>
	
	<li><p>Understand the key arguments for importing data properly, such as <code class="language-plaintext highlighter-rouge">header</code> and <code class="language-plaintext highlighter-rouge">stringsAsFactors</code>.</p>
</li>
	
	<li><p>Understand the key arguments for exporting the data properly, such as <code class="language-plaintext highlighter-rouge">row.names</code>, <code class="language-plaintext highlighter-rouge">col.names</code>, and <code class="language-plaintext highlighter-rouge">quote</code>.</p>
</li>
	
	<li><p>Combine different methods for accessing data with the assignment operator to update subsets of data.</p>
</li>
	
      </ul>
    </div>
  </div>

</blockquote>

<h2 id="in-class">In Class</h2>

<h3 id="data-frames">Data Frames</h3>

<p>The <strong>data frame</strong> is the most important data type in R. It is the <em>de facto</em> data structure for most tabular data and what we will use for calculating statistics and running other analyses. <strong>Data frames</strong> have some similarities to matrices. For example, both are two-dimensional structures and can be similarly indexed using <code class="language-plaintext highlighter-rouge">[]</code>. However, <strong>data frames</strong> have several features that distinguish them from <strong>matrices</strong> and make them more generally useful to store and manipulate datasets.</p>

<p><strong>Data frames</strong> have the following characteristics:</p>
<ul>
  <li>Each column must contain a single data type</li>
  <li>Different columns can have different data types</li>
  <li>All columns must have the same number of elements (i.e. rows)</li>
  <li>Each column has a names can be directly called using the <code class="language-plaintext highlighter-rouge">$</code> operator</li>
  <li>Like matrices, data frames can be indexed using the <code class="language-plaintext highlighter-rouge">df[row,column]</code> notation.</li>
</ul>

<p>As with other data types and structure, <strong>data frames</strong> can be generated manually using the <code class="language-plaintext highlighter-rouge">data.frame()</code> function:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dat</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">letters</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">],</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">11</span><span class="o">:</span><span class="m">20</span><span class="p">)</span><span class="w">
</span><span class="n">dat</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   id  x  y
1   a  1 11
2   b  2 12
3   c  3 13
4   d  4 14
5   e  5 15
6   f  6 16
7   g  7 17
8   h  8 18
9   i  9 19
10  j 10 20
</code></pre></div></div>

<p> </p>

<p>Note the structural difference when compared to the same object coerced to a matrix, particularly the different data types in each column:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">m</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.matrix</span><span class="p">(</span><span class="n">dat</span><span class="p">)</span><span class="w">
</span><span class="n">m</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      id  x    y   
 [1,] "a" " 1" "11"
 [2,] "b" " 2" "12"
 [3,] "c" " 3" "13"
 [4,] "d" " 4" "14"
 [5,] "e" " 5" "15"
 [6,] "f" " 6" "16"
 [7,] "g" " 7" "17"
 [8,] "h" " 8" "18"
 [9,] "i" " 9" "19"
[10,] "j" "10" "20"
</code></pre></div></div>

<p> </p>

<p>Converting a <strong>data frame</strong> to a <strong>matrix</strong> enforces the “single data type” requirement of the latter by coercing all elements to the most general data type already present (in this case <strong>character</strong>). If we try to reverse the conversion (using the <code class="language-plaintext highlighter-rouge">as.data.frame()</code> function) we lose the original data structure:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">m.dat</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.data.frame</span><span class="p">(</span><span class="n">m</span><span class="p">)</span><span class="w">
</span><span class="n">m.dat</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   id  x  y
1   a  1 11
2   b  2 12
3   c  3 13
4   d  4 14
5   e  5 15
6   f  6 16
7   g  7 17
8   h  8 18
9   i  9 19
10  j 10 20
</code></pre></div></div>

<p> </p>

<p>The attributes are also distinct for the two data types.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">class</span><span class="p">(</span><span class="n">m</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] "matrix" "array" 
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">class</span><span class="p">(</span><span class="n">dat</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] "data.frame"
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">attributes</span><span class="p">(</span><span class="n">m</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$dim
[1] 10  3

$dimnames
$dimnames[[1]]
NULL

$dimnames[[2]]
[1] "id" "x"  "y" 
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">attributes</span><span class="p">(</span><span class="n">dat</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$names
[1] "id" "x"  "y" 

$class
[1] "data.frame"

$row.names
 [1]  1  2  3  4  5  6  7  8  9 10
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">dim</span><span class="p">(</span><span class="n">m</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 10  3
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">dim</span><span class="p">(</span><span class="n">dat</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 10  3
</code></pre></div></div>

<p> </p>

<p>The above features mean that <strong>matrices</strong> and <strong>data frames</strong> are suitable for different data types. For instance, <strong>matrices</strong> are optimized for data of the same type, and particularly data with a inherently two-dimensional structure–e.g. image data stored as pixel intensities at different x-y coordinates. <strong>Data frames</strong> are optimized for data sets with mixed data types–e.g. patient data with multiple phenotypes, such as patient ID (<strong>character</strong>), sex (<strong>character</strong>), body weight (<strong>numeric</strong>), and smoking status (<strong>logical</strong>). The mixed structure of data in <strong>data frames</strong> makes them non-suitable to matrix operations (e.g. matrix multiplication, transposition).</p>

<p>Here is some additional information on <strong>data frames</strong>:</p>

<ul>
  <li>A <strong>data frame</strong> is created by the <code class="language-plaintext highlighter-rouge">read.csv()</code> and <code class="language-plaintext highlighter-rouge">read.table()</code> when importing the data into R (see below).</li>
  <li>Assuming all columns in a data frame are of same type, data frame can be converted to a matrix with <code class="language-plaintext highlighter-rouge">data.matrix()</code> (preferred) or <code class="language-plaintext highlighter-rouge">as.matrix()</code>. Otherwise type coercion will be enforced and the results may not always be what you expect.</li>
  <li><strong>Data frames</strong> can be created <em>de novo</em> with the <code class="language-plaintext highlighter-rouge">data.frame()</code> or <code class="language-plaintext highlighter-rouge">as.data.frame()</code> functions.</li>
  <li>Like matrices, the number of rows and columns can be queried with <code class="language-plaintext highlighter-rouge">nrow(dat)</code> and <code class="language-plaintext highlighter-rouge">ncol(dat)</code>, respectively.</li>
  <li><strong>Data frames</strong> can have additional attributes such as <code class="language-plaintext highlighter-rouge">rownames()</code>, which can be useful for annotating data, like <code class="language-plaintext highlighter-rouge">subject_id</code> or <code class="language-plaintext highlighter-rouge">sample_id</code>.</li>
  <li>Row names are often automatically generated to reflect the row number: <code class="language-plaintext highlighter-rouge">1, 2, ..., n</code>. Consistency in numbering of row names may not be honored when rows are reshuffled or when a <strong>data frame</strong> is subsetted.</li>
  <li>A common way to use data frames is with columns as “variables” (e.g. body weight, blood pressure) and rows as “patients” or “observations” (e.g. “subject 1”, “subject 2”, …).</li>
</ul>

<p>Just as a <strong>matrix</strong> in R is a specialized <strong>vector</strong>, a <strong>data frame</strong> is a specialized <strong>list</strong>. More on this in today’s <em>On Your Own</em> section. For now, the following table summarizes the one-dimensional and two-dimensional data structures in R in relation to diversity of data types they can contain.</p>

<table>
  <thead>
    <tr>
      <th>Dimensions</th>
      <th>Homogeneous</th>
      <th>Heterogeneous</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1-D</td>
      <td>atomic vector</td>
      <td>list</td>
    </tr>
    <tr>
      <td>2-D</td>
      <td>matrix</td>
      <td>data frame</td>
    </tr>
  </tbody>
</table>

<p> </p>
<h4 id="sample-data-in-r">Sample data in R</h4>

<p>R includes a number of built-in data sets that can be used to examine and test different functions and operators. The variable <code class="language-plaintext highlighter-rouge">iris</code> contains a pre-defined <strong>data frame</strong> that is automatically loaded into memory when R is initialized. We will use <code class="language-plaintext highlighter-rouge">iris</code> to begin learning how to interact with <strong>data frames</strong>.</p>

<p>Let’s start by looking at the documentation for the <code class="language-plaintext highlighter-rouge">iris</code> data set:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">?</span><span class="n">iris</span><span class="w">
</span></code></pre></div></div>

<p> </p>

<p>For reference, here are images of the flowers from the three iris species from the <code class="language-plaintext highlighter-rouge">iris</code> dataset:</p>

<p><img src="../fig/iris-images.png" alt="The three iris species references in the `iris` dataset" /></p>

<p>There are many ways to interact with <strong>data frames</strong> and get information about their contents. We have seen some of these previously:</p>

<blockquote class="callout">
  <h2 id="useful-data-frame-functions">Useful Data Frame Functions</h2>

  <ul>
    <li><code class="language-plaintext highlighter-rouge">head()</code> - shows first 6 rows</li>
    <li><code class="language-plaintext highlighter-rouge">tail()</code> - shows last 6 rows</li>
    <li><code class="language-plaintext highlighter-rouge">dim()</code> - returns the dimensions of data frame (i.e. number of rows and number of columns)</li>
    <li><code class="language-plaintext highlighter-rouge">nrow()</code> - number of rows</li>
    <li><code class="language-plaintext highlighter-rouge">ncol()</code> - number of columns</li>
    <li><code class="language-plaintext highlighter-rouge">str()</code> - structure of data frame - name, type and preview of data in each column</li>
    <li><code class="language-plaintext highlighter-rouge">names()</code> or <code class="language-plaintext highlighter-rouge">colnames()</code> - both show the <code class="language-plaintext highlighter-rouge">names</code> attribute for a data frame</li>
    <li><code class="language-plaintext highlighter-rouge">sapply(dataframe, class)</code> - shows the class of each column in the data frame</li>
  </ul>
</blockquote>

<p> </p>

<p>I find <code class="language-plaintext highlighter-rouge">head()</code>, which displays the first 6 rows and all columns of the data frame, particularly useful to get a feel for the contents and organization of a new data frame. Let’s take a quick look at <code class="language-plaintext highlighter-rouge">iris</code> with <code class="language-plaintext highlighter-rouge">head()</code> and <code class="language-plaintext highlighter-rouge">dim()</code>:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">head</span><span class="p">(</span><span class="n">iris</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">head</span><span class="p">(</span><span class="n">iris</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="c1"># you can look at more or fewer rows if 6 is not what you want</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">dim</span><span class="p">(</span><span class="n">iris</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 150   5
</code></pre></div></div>

<p> </p>

<p>We know that <strong>data frames</strong> can store different data types in different columns, but how do we tell which data types are present in a specific <strong>data frame</strong>?</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">class</span><span class="p">(</span><span class="n">iris</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] "data.frame"
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">mode</span><span class="p">(</span><span class="n">iris</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] "list"
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">typeof</span><span class="p">(</span><span class="n">iris</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] "list"
</code></pre></div></div>
<p> </p>

<p>The usual functions for looking at the data type of basic variables and data structures don’t seem to work. This is where the <code class="language-plaintext highlighter-rouge">str()</code> is particularly useful:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">str</span><span class="p">(</span><span class="n">iris</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>'data.frame':	150 obs. of  5 variables:
 $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
 $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
 $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
 $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
 $ Species     : Factor w/ 3 levels "setosa","versicolor",..: 1 1 1 1 1 1 1 1 1 1 ...
</code></pre></div></div>

<p> </p>

<p><code class="language-plaintext highlighter-rouge">str()</code> gives a lot of useful information about <strong>data frames</strong>:</p>
<ul>
  <li>number of rows (i.e. <code class="language-plaintext highlighter-rouge">150 obs.</code>)</li>
  <li>number of columns (i.e. <code class="language-plaintext highlighter-rouge">5 variables</code>)</li>
  <li>the name of each column (e.g. <code class="language-plaintext highlighter-rouge">$Sepal.Length</code>)</li>
  <li>the data type of each column (e.g. <code class="language-plaintext highlighter-rouge">num</code>)</li>
  <li>the first 10 entries in each column (e.g. <code class="language-plaintext highlighter-rouge">5.1, 4.9, 4.7, ...</code>)</li>
</ul>

<p> </p>

<p>This is the same information displayed if you toggle the arrow for a <strong>data frame</strong> variable in the <em>Environment</em> panel (by default this is in the upper-right panel of RStudio), for instance the <code class="language-plaintext highlighter-rouge">dat</code> variable we created earlier. Clicking on a variable opens a basic spreadsheet representation of the table in the <em>Source Editor</em> panel (upper-left by default).</p>

<p> </p>
<h4 id="indexing-data-frames">Indexing data frames</h4>

<p>We examined basic indexing using <strong>vectors</strong> and <strong>matrices</strong> in last week’s lessons. These work the same for <strong>data frames</strong>. There are really three primary ways for accessing specific data inside <strong>data frames</strong>:</p>

<ul>
  <li>By index</li>
  <li>By name</li>
  <li>By logical vector</li>
</ul>

<p>These can be combined to rapidly extract desired data subsets within <strong>data frames</strong>. You will be exploring these in depth <em>On Your Own</em>, but here I will give you the flavor of each.</p>

<p> </p>

<p><strong>By index</strong></p>

<p>Because <strong>data frames</strong> are rectangular, elements of data frame can be referenced by specifying the row and the column index in single square brackets (similar to <strong>matrices</strong>).</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iris</span><span class="p">[</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 1.4
</code></pre></div></div>

<p> </p>

<p>Like <strong>matrices</strong>, we can also ask for multiple columns and rows using the <code class="language-plaintext highlighter-rouge">:</code> operator:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iris</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">20</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="o">:</span><span class="m">3</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   Sepal.Width Petal.Length
1          3.5          1.4
2          3.0          1.4
3          3.2          1.3
4          3.1          1.5
5          3.6          1.4
6          3.9          1.7
7          3.4          1.4
8          3.4          1.5
9          2.9          1.4
10         3.1          1.5
11         3.7          1.5
12         3.4          1.6
13         3.0          1.4
14         3.0          1.1
15         4.0          1.2
16         4.4          1.5
17         3.9          1.3
18         3.5          1.4
19         3.8          1.7
20         3.8          1.5
</code></pre></div></div>

<p> </p>

<p>… or for non-contiguous subsets using lists of indices:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iris</span><span class="p">[</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">,</span><span class="m">20</span><span class="o">:</span><span class="m">25</span><span class="p">),</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">3</span><span class="p">)]</span><span class="w"> </span><span class="c1"># note the use of sequences within the `c()` list</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   Sepal.Length Petal.Length
1           5.1          1.4
2           4.9          1.4
3           4.7          1.3
4           4.6          1.5
5           5.0          1.4
6           5.4          1.7
7           4.6          1.4
8           5.0          1.5
9           4.4          1.4
10          4.9          1.5
20          5.1          1.5
21          5.4          1.7
22          5.1          1.5
23          4.6          1.0
24          5.1          1.7
25          4.8          1.9
</code></pre></div></div>

<p> </p>

<p>As with other data types, leaving a dimension blank is interpreted as <em>return all values</em> in that dimension:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iris</span><span class="p">[</span><span class="m">2</span><span class="p">,]</span><span class="w"> </span><span class="c1"># return row 2</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
2          4.9           3          1.4         0.2  setosa
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iris</span><span class="p">[,</span><span class="m">2</span><span class="p">]</span><span class="w"> </span><span class="c1"># return column 2</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  [1] 3.5 3.0 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 3.7 3.4 3.0 3.0 4.0 4.4 3.9 3.5
 [19] 3.8 3.8 3.4 3.7 3.6 3.3 3.4 3.0 3.4 3.5 3.4 3.2 3.1 3.4 4.1 4.2 3.1 3.2
 [37] 3.5 3.6 3.0 3.4 3.5 2.3 3.2 3.5 3.8 3.0 3.8 3.2 3.7 3.3 3.2 3.2 3.1 2.3
 [55] 2.8 2.8 3.3 2.4 2.9 2.7 2.0 3.0 2.2 2.9 2.9 3.1 3.0 2.7 2.2 2.5 3.2 2.8
 [73] 2.5 2.8 2.9 3.0 2.8 3.0 2.9 2.6 2.4 2.4 2.7 2.7 3.0 3.4 3.1 2.3 3.0 2.5
 [91] 2.6 3.0 2.6 2.3 2.7 3.0 2.9 2.9 2.5 2.8 3.3 2.7 3.0 2.9 3.0 3.0 2.5 2.9
[109] 2.5 3.6 3.2 2.7 3.0 2.5 2.8 3.2 3.0 3.8 2.6 2.2 3.2 2.8 2.8 2.7 3.3 3.2
[127] 2.8 3.0 2.8 3.0 2.8 3.8 2.8 2.8 2.6 3.0 3.4 3.1 3.0 3.1 3.1 3.1 2.7 3.2
[145] 3.3 3.0 2.5 3.0 3.4 3.0
</code></pre></div></div>

<p> </p>

<p>Note that the column version actually returns a vector of the data type in the requested column number, rather than a data frame with a single column:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">class</span><span class="p">(</span><span class="n">iris</span><span class="p">[,</span><span class="m">2</span><span class="p">])</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] "numeric"
</code></pre></div></div>

<p> </p>

<p>What if we only ask for one dimension in data frame?</p>

<blockquote class="challenge">
  <h2 id="asking-for-a-single-index-from-a-data-frame">Asking for a single index from a data frame</h2>

  <p>What do you expect if we query <code class="language-plaintext highlighter-rouge">iris</code> with just one index?</p>

  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iris</span><span class="p">[</span><span class="m">3</span><span class="p">]</span><span class="w">
</span></code></pre></div>  </div>
  <blockquote class="solution">
    <h2 id="solution">Solution</h2>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iris</span><span class="p">[</span><span class="m">3</span><span class="p">]</span><span class="w">
</span></code></pre></div>    </div>

    <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    Petal.Length
1            1.4
2            1.4
3            1.3
4            1.5
5            1.4
6            1.7
7            1.4
8            1.5
9            1.4
10           1.5
11           1.5
12           1.6
13           1.4
14           1.1
15           1.2
16           1.5
17           1.3
18           1.4
19           1.7
20           1.5
21           1.7
22           1.5
23           1.0
24           1.7
25           1.9
26           1.6
27           1.6
28           1.5
29           1.4
30           1.6
31           1.6
32           1.5
33           1.5
34           1.4
35           1.5
36           1.2
37           1.3
38           1.4
39           1.3
40           1.5
41           1.3
42           1.3
43           1.3
44           1.6
45           1.9
46           1.4
47           1.6
48           1.4
49           1.5
50           1.4
51           4.7
52           4.5
53           4.9
54           4.0
55           4.6
56           4.5
57           4.7
58           3.3
59           4.6
60           3.9
61           3.5
62           4.2
63           4.0
64           4.7
65           3.6
66           4.4
67           4.5
68           4.1
69           4.5
70           3.9
71           4.8
72           4.0
73           4.9
74           4.7
75           4.3
76           4.4
77           4.8
78           5.0
79           4.5
80           3.5
81           3.8
82           3.7
83           3.9
84           5.1
85           4.5
86           4.5
87           4.7
88           4.4
89           4.1
90           4.0
91           4.4
92           4.6
93           4.0
94           3.3
95           4.2
96           4.2
97           4.2
98           4.3
99           3.0
100          4.1
101          6.0
102          5.1
103          5.9
104          5.6
105          5.8
106          6.6
107          4.5
108          6.3
109          5.8
110          6.1
111          5.1
112          5.3
113          5.5
114          5.0
115          5.1
116          5.3
117          5.5
118          6.7
119          6.9
120          5.0
121          5.7
122          4.9
123          6.7
124          4.9
125          5.7
126          6.0
127          4.8
128          4.9
129          5.6
130          5.8
131          6.1
132          6.4
133          5.6
134          5.1
135          5.6
136          6.1
137          5.6
138          5.5
139          4.8
140          5.4
141          5.6
142          5.1
143          5.1
144          5.9
145          5.7
146          5.2
147          5.0
148          5.2
149          5.4
150          5.1
</code></pre></div>    </div>
    <p>Because the data frame is a list at heart, just asking for a single index returns 
the indicated column.</p>

  </blockquote>
</blockquote>

<p> </p>

<p><strong>By name</strong></p>

<p><strong>Data frames</strong> (and <strong>lists</strong>; see <em>On Your Own</em> section) have a special property in that each column is considered a separate element with a unique name that can be used as a handle to call the data in that column. To exploit this feature, you can either use double square brackets (<code class="language-plaintext highlighter-rouge">[[]]</code>) or the <code class="language-plaintext highlighter-rouge">$</code>:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iris</span><span class="p">[[</span><span class="s2">"Sepal.Length"</span><span class="p">]]</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  [1] 5.1 4.9 4.7 4.6 5.0 5.4 4.6 5.0 4.4 4.9 5.4 4.8 4.8 4.3 5.8 5.7 5.4 5.1
 [19] 5.7 5.1 5.4 5.1 4.6 5.1 4.8 5.0 5.0 5.2 5.2 4.7 4.8 5.4 5.2 5.5 4.9 5.0
 [37] 5.5 4.9 4.4 5.1 5.0 4.5 4.4 5.0 5.1 4.8 5.1 4.6 5.3 5.0 7.0 6.4 6.9 5.5
 [55] 6.5 5.7 6.3 4.9 6.6 5.2 5.0 5.9 6.0 6.1 5.6 6.7 5.6 5.8 6.2 5.6 5.9 6.1
 [73] 6.3 6.1 6.4 6.6 6.8 6.7 6.0 5.7 5.5 5.5 5.8 6.0 5.4 6.0 6.7 6.3 5.6 5.5
 [91] 5.5 6.1 5.8 5.0 5.6 5.7 5.7 6.2 5.1 5.7 6.3 5.8 7.1 6.3 6.5 7.6 4.9 7.3
[109] 6.7 7.2 6.5 6.4 6.8 5.7 5.8 6.4 6.5 7.7 7.7 6.0 6.9 5.6 7.7 6.3 6.7 7.2
[127] 6.2 6.1 6.4 7.2 7.4 7.9 6.4 6.3 6.1 7.7 6.3 6.4 6.0 6.9 6.7 6.9 5.8 6.8
[145] 6.7 6.7 6.3 6.5 6.2 5.9
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iris</span><span class="o">$</span><span class="n">Sepal.Length</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  [1] 5.1 4.9 4.7 4.6 5.0 5.4 4.6 5.0 4.4 4.9 5.4 4.8 4.8 4.3 5.8 5.7 5.4 5.1
 [19] 5.7 5.1 5.4 5.1 4.6 5.1 4.8 5.0 5.0 5.2 5.2 4.7 4.8 5.4 5.2 5.5 4.9 5.0
 [37] 5.5 4.9 4.4 5.1 5.0 4.5 4.4 5.0 5.1 4.8 5.1 4.6 5.3 5.0 7.0 6.4 6.9 5.5
 [55] 6.5 5.7 6.3 4.9 6.6 5.2 5.0 5.9 6.0 6.1 5.6 6.7 5.6 5.8 6.2 5.6 5.9 6.1
 [73] 6.3 6.1 6.4 6.6 6.8 6.7 6.0 5.7 5.5 5.5 5.8 6.0 5.4 6.0 6.7 6.3 5.6 5.5
 [91] 5.5 6.1 5.8 5.0 5.6 5.7 5.7 6.2 5.1 5.7 6.3 5.8 7.1 6.3 6.5 7.6 4.9 7.3
[109] 6.7 7.2 6.5 6.4 6.8 5.7 5.8 6.4 6.5 7.7 7.7 6.0 6.9 5.6 7.7 6.3 6.7 7.2
[127] 6.2 6.1 6.4 7.2 7.4 7.9 6.4 6.3 6.1 7.7 6.3 6.4 6.0 6.9 6.7 6.9 5.8 6.8
[145] 6.7 6.7 6.3 6.5 6.2 5.9
</code></pre></div></div>

<p> </p>

<p>These named columns can be used in vectorized mathematical operations:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iris</span><span class="o">$</span><span class="n">Sepal.Length</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">iris</span><span class="o">$</span><span class="n">Petal.Length</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  [1]  6.5  6.3  6.0  6.1  6.4  7.1  6.0  6.5  5.8  6.4  6.9  6.4  6.2  5.4  7.0
 [16]  7.2  6.7  6.5  7.4  6.6  7.1  6.6  5.6  6.8  6.7  6.6  6.6  6.7  6.6  6.3
 [31]  6.4  6.9  6.7  6.9  6.4  6.2  6.8  6.3  5.7  6.6  6.3  5.8  5.7  6.6  7.0
 [46]  6.2  6.7  6.0  6.8  6.4 11.7 10.9 11.8  9.5 11.1 10.2 11.0  8.2 11.2  9.1
 [61]  8.5 10.1 10.0 10.8  9.2 11.1 10.1  9.9 10.7  9.5 10.7 10.1 11.2 10.8 10.7
 [76] 11.0 11.6 11.7 10.5  9.2  9.3  9.2  9.7 11.1  9.9 10.5 11.4 10.7  9.7  9.5
 [91]  9.9 10.7  9.8  8.3  9.8  9.9  9.9 10.5  8.1  9.8 12.3 10.9 13.0 11.9 12.3
[106] 14.2  9.4 13.6 12.5 13.3 11.6 11.7 12.3 10.7 10.9 11.7 12.0 14.4 14.6 11.0
[121] 12.6 10.5 14.4 11.2 12.4 13.2 11.0 11.0 12.0 13.0 13.5 14.3 12.0 11.4 11.7
[136] 13.8 11.9 11.9 10.8 12.3 12.3 12.0 10.9 12.7 12.4 11.9 11.3 11.7 11.6 11.0
</code></pre></div></div>

<p> </p>

<blockquote class="callout">
  <h2 id="default-names">Default Names</h2>

  <p>If column names are not specified, <code class="language-plaintext highlighter-rouge">V1, V2, ..., Vn</code> are automatically used as the defaults. For example, if we convert a matrix to a data frame:</p>

  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">m</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">matrix</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="n">nrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w">
</span><span class="n">m.data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.data.frame</span><span class="p">(</span><span class="n">m</span><span class="p">)</span><span class="w">
</span><span class="n">m.data</span><span class="w">
</span></code></pre></div>  </div>

  <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  V1 V2 V3 V4 V5
1  1  3  5  7  9
2  2  4  6  8 10
</code></pre></div>  </div>
</blockquote>

<p> </p>

<p><strong>By logical vector</strong></p>

<p>Recall that a logical vector contains only the special values <code class="language-plaintext highlighter-rouge">TRUE</code> and <code class="language-plaintext highlighter-rouge">FALSE</code>:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">c</span><span class="p">(</span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1]  TRUE  TRUE FALSE FALSE  TRUE
</code></pre></div></div>

<p> </p>

<p><strong>Data frames</strong> and other data structures can accept <strong>logical</strong> vectors as indexing variables. Usually the length of the vector will be the same as the corresponding dimension of the <strong>data frame</strong>, with each vector element indicating whether the corresponding row or column in the <strong>data frame</strong> should be included (<code class="language-plaintext highlighter-rouge">TRUE</code>) or excluded (<code class="language-plaintext highlighter-rouge">FALSE</code>) in the output <strong>data frame</strong>. Let’s look at a simple example using <code class="language-plaintext highlighter-rouge">dat</code>:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># grab the dimensions of dat</span><span class="w">
</span><span class="nf">dim</span><span class="p">(</span><span class="n">dat</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 10  3
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># create a logical vector with 10 elements indicating that</span><span class="w">
</span><span class="c1"># elements 2, 3, and 7 should be returned</span><span class="w">
</span><span class="n">index</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="nb">F</span><span class="p">,</span><span class="nb">T</span><span class="p">,</span><span class="nb">T</span><span class="p">,</span><span class="nb">F</span><span class="p">,</span><span class="nb">F</span><span class="p">,</span><span class="nb">F</span><span class="p">,</span><span class="nb">T</span><span class="p">,</span><span class="nb">F</span><span class="p">,</span><span class="nb">F</span><span class="p">,</span><span class="nb">F</span><span class="p">)</span><span class="w">

</span><span class="c1"># use the created logical vector to index the rows of dat</span><span class="w">
</span><span class="n">dat</span><span class="p">[</span><span class="n">index</span><span class="p">,]</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  id x  y
2  b 2 12
3  c 3 13
7  g 7 17
</code></pre></div></div>

<p> </p>

<p>Logical indexing is one of the most powerful subsetting techniques in R. Generally, we won’t be manually defining the index vector, but using R to generate the appropriate logical vector. We will go into more depth in the <em>On Your Own</em>, but let’s look at an example and a few simple exercises to look at how logical indexing may be used in practice.</p>

<p>Looking at the <code class="language-plaintext highlighter-rouge">iris</code> dataset, we can use the logical operator <code class="language-plaintext highlighter-rouge">==</code> to return the subset of data corresponding to the <em>Iris setosa</em> species. First, let’s examine what the <code class="language-plaintext highlighter-rouge">==</code> operator does:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Which elements of a vector are exactly equal to 1?</span><span class="w">
</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">3</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">1</span><span class="p">)</span><span class="w">
</span><span class="n">x</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] FALSE FALSE  TRUE FALSE  TRUE FALSE  TRUE
</code></pre></div></div>

<p> </p>

<p>The expression <code class="language-plaintext highlighter-rouge">x == 1</code> automatically returns a logical vector of the same length as <code class="language-plaintext highlighter-rouge">x</code> with <code class="language-plaintext highlighter-rouge">TRUE</code> elements where <code class="language-plaintext highlighter-rouge">x</code> is exactly <code class="language-plaintext highlighter-rouge">1</code> and <code class="language-plaintext highlighter-rouge">FALSE</code> elements where <code class="language-plaintext highlighter-rouge">x</code> is not exactly <code class="language-plaintext highlighter-rouge">1</code>. Let’s apply this to our <code class="language-plaintext highlighter-rouge">iris</code> data set:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># create a vector indicating which elements of the iris "Species"</span><span class="w">
</span><span class="c1"># variable are equal to "setosa"</span><span class="w">
</span><span class="n">i.setosa</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">iris</span><span class="o">$</span><span class="n">Species</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"setosa"</span><span class="w">
</span><span class="n">i.setosa</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [49]  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[145] FALSE FALSE FALSE FALSE FALSE FALSE
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># use the vector to extract the subset of the iris data for flowers</span><span class="w">
</span><span class="c1"># of the "Iris setosa" species</span><span class="w">
</span><span class="n">setosa</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">iris</span><span class="p">[</span><span class="n">i.setosa</span><span class="p">,]</span><span class="w"> </span><span class="c1"># don't forget to specify "all" columns!</span><span class="w">
</span><span class="n">setosa</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1           5.1         3.5          1.4         0.2  setosa
2           4.9         3.0          1.4         0.2  setosa
3           4.7         3.2          1.3         0.2  setosa
4           4.6         3.1          1.5         0.2  setosa
5           5.0         3.6          1.4         0.2  setosa
6           5.4         3.9          1.7         0.4  setosa
7           4.6         3.4          1.4         0.3  setosa
8           5.0         3.4          1.5         0.2  setosa
9           4.4         2.9          1.4         0.2  setosa
10          4.9         3.1          1.5         0.1  setosa
11          5.4         3.7          1.5         0.2  setosa
12          4.8         3.4          1.6         0.2  setosa
13          4.8         3.0          1.4         0.1  setosa
14          4.3         3.0          1.1         0.1  setosa
15          5.8         4.0          1.2         0.2  setosa
16          5.7         4.4          1.5         0.4  setosa
17          5.4         3.9          1.3         0.4  setosa
18          5.1         3.5          1.4         0.3  setosa
19          5.7         3.8          1.7         0.3  setosa
20          5.1         3.8          1.5         0.3  setosa
21          5.4         3.4          1.7         0.2  setosa
22          5.1         3.7          1.5         0.4  setosa
23          4.6         3.6          1.0         0.2  setosa
24          5.1         3.3          1.7         0.5  setosa
25          4.8         3.4          1.9         0.2  setosa
26          5.0         3.0          1.6         0.2  setosa
27          5.0         3.4          1.6         0.4  setosa
28          5.2         3.5          1.5         0.2  setosa
29          5.2         3.4          1.4         0.2  setosa
30          4.7         3.2          1.6         0.2  setosa
31          4.8         3.1          1.6         0.2  setosa
32          5.4         3.4          1.5         0.4  setosa
33          5.2         4.1          1.5         0.1  setosa
34          5.5         4.2          1.4         0.2  setosa
35          4.9         3.1          1.5         0.2  setosa
36          5.0         3.2          1.2         0.2  setosa
37          5.5         3.5          1.3         0.2  setosa
38          4.9         3.6          1.4         0.1  setosa
39          4.4         3.0          1.3         0.2  setosa
40          5.1         3.4          1.5         0.2  setosa
41          5.0         3.5          1.3         0.3  setosa
42          4.5         2.3          1.3         0.3  setosa
43          4.4         3.2          1.3         0.2  setosa
44          5.0         3.5          1.6         0.6  setosa
45          5.1         3.8          1.9         0.4  setosa
46          4.8         3.0          1.4         0.3  setosa
47          5.1         3.8          1.6         0.2  setosa
48          4.6         3.2          1.4         0.2  setosa
49          5.3         3.7          1.5         0.2  setosa
50          5.0         3.3          1.4         0.2  setosa
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># note that you can also just do this all on one line:</span><span class="w">
</span><span class="n">setosa</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">iris</span><span class="p">[</span><span class="n">iris</span><span class="o">$</span><span class="n">Species</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"setosa"</span><span class="p">,]</span><span class="w">
</span></code></pre></div></div>

<p> </p>
<blockquote class="challenge">
  <h2 id="subsetting-sepal-length">Subsetting sepal length</h2>

  <p>Use the <code class="language-plaintext highlighter-rouge">&gt;</code> operator to create a new data frame that is the subset of <code class="language-plaintext highlighter-rouge">iris</code> with sepal length greater than 5.0 for the species.</p>

  <blockquote class="solution">
    <h2 id="solution-1">Solution</h2>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iris.new</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">iris</span><span class="p">[</span><span class="n">iris</span><span class="o">$</span><span class="n">Sepal.Length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">5</span><span class="p">,]</span><span class="w">
</span></code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="comparing-variables--petal-aspect-ratio">Comparing variables – petal aspect ratio</h2>

  <p>Create a new data frame that includes all flowers for which the petal length is less than 3x the petal width.</p>

  <blockquote class="solution">
    <h2 id="solution-2">Solution</h2>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iris.new</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">iris</span><span class="p">[</span><span class="n">iris</span><span class="o">$</span><span class="n">Petal.Length</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">iris</span><span class="o">$</span><span class="n">Petal.Width</span><span class="p">,]</span><span class="w">
</span></code></pre></div>    </div>
  </blockquote>
</blockquote>

<blockquote class="challenge">
  <h2 id="combining-concepts--subsetting-and-counting">Combining concepts – subsetting and counting</h2>

  <p>How many flower of each species in the current data set have petal length less than 3x the petal width?</p>

  <blockquote class="solution">
    <h2 id="solution-3">Solution</h2>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># First subset on the aspect ratio as in the previous exercise</span><span class="w">
</span><span class="n">iris.new</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">iris</span><span class="p">[</span><span class="n">iris</span><span class="o">$</span><span class="n">Petal.Length</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">iris</span><span class="o">$</span><span class="n">Petal.Width</span><span class="p">,]</span><span class="w">

</span><span class="c1"># Now we have several options.</span><span class="w">
</span><span class="c1"># Option 1: Subset on species, then look at dimensions:</span><span class="w">
</span><span class="n">iris.setosa</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">iris.new</span><span class="p">[</span><span class="n">iris.new</span><span class="o">$</span><span class="n">Species</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"setosa"</span><span class="p">,]</span><span class="w">
</span><span class="n">iris.versicolor</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">iris.new</span><span class="p">[</span><span class="n">iris.new</span><span class="o">$</span><span class="n">Species</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"versicolor"</span><span class="p">,]</span><span class="w">
</span><span class="n">iris.virginica</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">iris.new</span><span class="p">[</span><span class="n">iris.new</span><span class="o">$</span><span class="n">Species</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"virginica"</span><span class="p">,]</span><span class="w">
</span><span class="nf">dim</span><span class="p">(</span><span class="n">iris.setosa</span><span class="p">)[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="c1"># index dimensions to return # of rows</span><span class="w">
</span></code></pre></div>    </div>

    <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 1
</code></pre></div>    </div>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">dim</span><span class="p">(</span><span class="n">iris.versicolor</span><span class="p">)[</span><span class="m">1</span><span class="p">]</span><span class="w">
</span></code></pre></div>    </div>

    <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 8
</code></pre></div>    </div>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">dim</span><span class="p">(</span><span class="n">iris.virginica</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">
</span></code></pre></div>    </div>

    <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 34
</code></pre></div>    </div>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Option 2: Use logical == combined with sum() to count each </span><span class="w">
</span><span class="c1"># species name in the new data frame</span><span class="w">
</span><span class="nf">sum</span><span class="p">(</span><span class="n">iris.new</span><span class="o">$</span><span class="n">Species</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"setosa"</span><span class="p">)</span><span class="w">
</span></code></pre></div>    </div>

    <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 1
</code></pre></div>    </div>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">sum</span><span class="p">(</span><span class="n">iris.new</span><span class="o">$</span><span class="n">Species</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"versicolor"</span><span class="p">)</span><span class="w">
</span></code></pre></div>    </div>

    <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 8
</code></pre></div>    </div>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">sum</span><span class="p">(</span><span class="n">iris.new</span><span class="o">$</span><span class="n">Species</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"virginica"</span><span class="p">)</span><span class="w">
</span></code></pre></div>    </div>

    <div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 34
</code></pre></div>    </div>
  </blockquote>
</blockquote>

<hr />
<h3 id="reading-data-from-a-tabulated-file-csv-txt">Reading data from a tabulated file (.csv, .txt)</h3>

<p>In the majority of cases, your data will be stored in some type of external file. The most common way that scientists store data is in Excel spreadsheets. While there are R packages designed to access data directly from Excel spreadsheets–the best I have found so far is <code class="language-plaintext highlighter-rouge">readxl</code>, for those who have need–these packages are often difficult and non-intuitive to use. Opening Excel spreadsheets from R is also slow, and it is not uncommon for large datasets to exceed the size limits of Excel. It is usually easier and faster to save tabular data in one or more <a href="../reference.html#comma-separated-values-csv">comma-separated values</a> (<em>CSV</em> or <em>.csv</em>) or text (<em>TXT</em> or <em>.txt</em>) files and then use R’s built in functionality to read and manipulate the data. Both file types are primitive forms of spreadsheet data anyway, in which data is stored as text with distinct data elements separated by a <em>delimiting character</em>–a comma <code class="language-plaintext highlighter-rouge">,</code> for <em>.csv</em> files and usually a tab (denoted <code class="language-plaintext highlighter-rouge">\t</code> in R) for <em>.txt</em> files.</p>

<p>Thankfully, Excel is capable of opening, editing, and saving both <em>.csv</em> and <em>.txt</em> files, so we can go back and forth between R and Excel when we find it convenient.</p>

<p>Here we will learn how to read external data from a <em>.csv</em> or <em>.txt</em> file, and write data modified or generated in R to a new <em>.csv</em> or <em>.txt</em> file. We will also explore the <a href="../reference.html#argument">arguments</a> that allow you read and write the data correctly for your needs.</p>

<p> </p>
<h4 id="loading-external-data-into-a-data-frame">Loading external data into a data frame</h4>

<p>Let’s start by loading some sample data in <em>.csv</em> format using the <code class="language-plaintext highlighter-rouge">read.csv()</code> function and take a look at the first few rows of the contents using the <code class="language-plaintext highlighter-rouge">head()</code> function:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dat</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'data/sample.csv'</span><span class="p">)</span><span class="w">
</span><span class="n">head</span><span class="p">(</span><span class="n">dat</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      ID Gender      Group BloodPressure  Age Aneurisms_q1 Aneurisms_q2
1 Sub001      m    Control           132 16.0          114          140
2 Sub002      m Treatment2           139 17.2          148          209
3 Sub003      m Treatment2           130 19.5          196          251
4 Sub004      f Treatment1           105 15.7          199          140
5 Sub005      m Treatment1           125 19.9          188          120
6 Sub006      M Treatment2           112 14.3          260          266
  Aneurisms_q3 Aneurisms_q4
1          202          237
2          248          248
3          122          177
4          233          220
5          222          228
6          320          294
</code></pre></div></div>

<p> </p>

<p>Open up the same file using a basic text editor (e.g. <em>Notepad</em> in Windows; <em>TextEdit</em> in MacOS). You should see something like this:</p>

<blockquote class="callout">
  <p>“ID”,”Gender”,”Group”,”BloodPressure”,”Age”,”Aneurisms_q1”,”Aneurisms_q2”,”Aneurisms_q3”,”Aneurisms_q4” 
“Sub001”,”m”,”Control”,132,16,114,140,202,237
“Sub002”,”m”,”Treatment2”,139,17.2,148,209,248,248
“Sub003”,”m”,”Treatment2”,130,19.5,196,251,122,177
“Sub004”,”f”,”Treatment1”,105,15.7,199,140,233,220
“Sub005”,”m”,”Treatment1”,125,19.9,188,120,222,228
“Sub006”,”M”,”Treatment2”,112,14.3,260,266,320,294</p>
</blockquote>

<p> </p>

<p>A couple of things to notice:</p>
<ul>
  <li>The first line contains column headers.</li>
  <li>The <code class="language-plaintext highlighter-rouge">,</code> delimiters tell the <code class="language-plaintext highlighter-rouge">read.csv(...)</code> function where the breaks in the data are located; that is, which data to put in which column of the output data frame.</li>
  <li>Each new line is also a delimiter that tells <code class="language-plaintext highlighter-rouge">read.csv(...)</code> which data to put in which row in the output data frame</li>
  <li>In this case, all strings are contained within quotation marks <code class="language-plaintext highlighter-rouge">""</code>. This is an optional way to tell the program where character strings start and stop.</li>
</ul>

<p>On the topic of using quotation marks, open <code class="language-plaintext highlighter-rouge">sample-noquotes.csv</code> in your text editor to see the quote-free option:</p>

<blockquote class="callout">
  <p>ID,Gender,Group,BloodPressure,Age,Aneurisms_q1,Aneurisms_q2,Aneurisms_q3,Aneurisms_q4 
Sub001,m,Control,132,16,114,140,202,237
Sub002,m,Treatment2,139,17.2,148,209,248,248
Sub003,m,Treatment2,130,19.5,196,251,122,177
Sub004,f,Treatment1,105,15.7,199,140,233,220
Sub005,m,Treatment1,125,19.9,188,120,222,228
Sub006,M,Treatment2,112,14.3,260,266,320,294</p>
</blockquote>

<p> </p>

<p>And note that the default <code class="language-plaintext highlighter-rouge">read.csv(...)</code> treats this file identically:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dat2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'data/sample-noquotes.csv'</span><span class="p">)</span><span class="w">
</span><span class="n">head</span><span class="p">(</span><span class="n">dat2</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      ID Gender      Group BloodPressure  Age Aneurisms_q1 Aneurisms_q2
1 Sub001      m    Control           132 16.0          114          140
2 Sub002      m Treatment2           139 17.2          148          209
3 Sub003      m Treatment2           130 19.5          196          251
4 Sub004      f Treatment1           105 15.7          199          140
5 Sub005      m Treatment1           125 19.9          188          120
6 Sub006      M Treatment2           112 14.3          260          266
  Aneurisms_q3 Aneurisms_q4
1          202          237
2          248          248
3          122          177
4          233          220
5          222          228
6          320          294
</code></pre></div></div>

<p> </p>

<p>Whether to use quotes in your data files is up to you. The default behavior of <code class="language-plaintext highlighter-rouge">read.csv(...)</code> is smart enough to figure this out on it’s own. However, the <code class="language-plaintext highlighter-rouge">read.csv(...)</code> has an argument called <code class="language-plaintext highlighter-rouge">quote</code> that dictates how to interpret quotation marks.</p>

<blockquote class="challenge">
  <h2 id="mis-loading-quoted-data">Mis-loading quoted data</h2>

  <p>What if we force <code class="language-plaintext highlighter-rouge">read.csv()</code> to ignore the quotes when they are present?
Before you run any code, think about what will happen to the data in quotes
if we tell R that there are no “quote” characters.</p>

  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dat3</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'data/sample.csv'</span><span class="p">,</span><span class="w"> </span><span class="n">quote</span><span class="o">=</span><span class="s2">""</span><span class="p">)</span><span class="w">
</span><span class="n">head</span><span class="p">(</span><span class="n">dat3</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>

  <blockquote class="solution">
    <h2 id="solution-4">Solution</h2>

    <p>The quotes are now included as part of the character arguments. It also messed up the header 
formatting, appending an “X” to the beginning and surrounding text with “.”ss.
Perhaps surprisingly, it does interpret teh numbers as numbers, rather than number “characters”
with quotation marks around them.</p>
  </blockquote>
</blockquote>

<p> </p>

<p>What happens if we don’t assign the output of <code class="language-plaintext highlighter-rouge">read.csv(...)</code> to a variable?</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">read.csv</span><span class="p">(</span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'data/sample.csv'</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p> </p>

<p>As with any other function call, if the output is not explicitly assigned, it will be dumped into the console window. This can be annoying with large data files. Remember to assign your <code class="language-plaintext highlighter-rouge">read...()</code> functions!</p>

<p> </p>
<h4 id="changing-delimiters">Changing Delimiters</h4>

<p>The default delimiter in the <code class="language-plaintext highlighter-rouge">read.csv()</code> function is a comma <code class="language-plaintext highlighter-rouge">,</code>, but you can use essentially any set of characters as a delimiter. <code class="language-plaintext highlighter-rouge">read.csv(...)</code> is actually a special case of a more general function called <code class="language-plaintext highlighter-rouge">read.table(...)</code>, with the delimiter argument (which is defined by the argument <code class="language-plaintext highlighter-rouge">sep</code>, for “separator”) set to <code class="language-plaintext highlighter-rouge">,</code> by default. Check out the help file for these functions:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">?</span><span class="n">read.table</span><span class="w"> </span><span class="c1"># note that `?read.csv` brings up the same help document.</span><span class="w">
</span></code></pre></div></div>

<p> </p>

<p>Under the <strong>Usage</strong> section there are multiple functions listed, including <code class="language-plaintext highlighter-rouge">read.table(...)</code> and <code class="language-plaintext highlighter-rouge">read.csv(...)</code>. In the parentheses for each function there is a list of arguments. Since <code class="language-plaintext highlighter-rouge">read.table(...)</code> is the parent function, all arguments are listed. Only arguments with different default values (as indicated by the <code class="language-plaintext highlighter-rouge">=</code>) are listed for <code class="language-plaintext highlighter-rouge">read.csv(...)</code>. A default value is the value that each argument assumes when you do not explicitly enter a value. For example, <code class="language-plaintext highlighter-rouge">read.table(...)</code> assumes that a data file has no header (<code class="language-plaintext highlighter-rouge">header = FALSE</code>) and no delimiting character (<code class="language-plaintext highlighter-rouge">sep = ""</code>) while <code class="language-plaintext highlighter-rouge">read.csv(...)</code> assumes that a data file does have a header (<code class="language-plaintext highlighter-rouge">header = TRUE</code>) and a comma as the delimiting character (<code class="language-plaintext highlighter-rouge">sep = ","</code>), unless you specify otherwise.</p>

<p>If your data is stored in a tab-delimited text file, you will need to use <code class="language-plaintext highlighter-rouge">read.table(...)</code> with a different delimiting character, or another of the associated functions called <code class="language-plaintext highlighter-rouge">read.delim(...)</code> which has defaults to a tab-delimited file format. Note that to define a <em>tab</em> as a delimiting character, you have to use <code class="language-plaintext highlighter-rouge">\t</code>.</p>

<p>Let’s give it a try using a copy of the <code class="language-plaintext highlighter-rouge">sample.csv</code> data saved as a tab-delimited <code class="language-plaintext highlighter-rouge">sample.txt</code> file.</p>

<p><em>Note:</em> From the help file, <code class="language-plaintext highlighter-rouge">read.delim(...)</code> defaults to <code class="language-plaintext highlighter-rouge">header = TRUE</code> while we have to explicitly define it when using <code class="language-plaintext highlighter-rouge">read.table(...)</code>. We will talk about what this means in the next section.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># note that read</span><span class="w">
</span><span class="n">dat4</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.delim</span><span class="p">(</span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'data/sample.txt'</span><span class="p">)</span><span class="w">
</span><span class="n">dat5</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.table</span><span class="p">(</span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'data/sample.txt'</span><span class="p">,</span><span class="w"> </span><span class="n">header</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span><span class="n">head</span><span class="p">(</span><span class="n">dat4</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      ID Gender      Group BloodPressure  Age Aneurisms_q1 Aneurisms_q2
1 Sub001      m    Control           132 16.0          114          140
2 Sub002      m Treatment2           139 17.2          148          209
3 Sub003      m Treatment2           130 19.5          196          251
4 Sub004      f Treatment1           105 15.7          199          140
5 Sub005      m Treatment1           125 19.9          188          120
6 Sub006      M Treatment2           112 14.3          260          266
  Aneurisms_q3 Aneurisms_q4
1          202          237
2          248          248
3          122          177
4          233          220
5          222          228
6          320          294
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">head</span><span class="p">(</span><span class="n">dat5</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      ID Gender      Group BloodPressure  Age Aneurisms_q1 Aneurisms_q2
1 Sub001      m    Control           132 16.0          114          140
2 Sub002      m Treatment2           139 17.2          148          209
3 Sub003      m Treatment2           130 19.5          196          251
4 Sub004      f Treatment1           105 15.7          199          140
5 Sub005      m Treatment1           125 19.9          188          120
6 Sub006      M Treatment2           112 14.3          260          266
  Aneurisms_q3 Aneurisms_q4
1          202          237
2          248          248
3          122          177
4          233          220
5          222          228
6          320          294
</code></pre></div></div>

<p> </p>

<p>Now let’s take a closer look at a couple of useful arguments in <code class="language-plaintext highlighter-rouge">read.table(...)</code> family of functions.</p>

<p> </p>
<h4 id="the-header-argument">The <code class="language-plaintext highlighter-rouge">header</code> argument</h4>

<p>The default for <code class="language-plaintext highlighter-rouge">read.csv(...)</code> and <code class="language-plaintext highlighter-rouge">read.delim(...)</code> is to set the <code class="language-plaintext highlighter-rouge">header</code> argument to <code class="language-plaintext highlighter-rouge">TRUE</code>. This means that the first row of values in the <em>.csv</em> or <em>.txt</em> is used to define the column names for the output <strong>data frame</strong>. If your dataset does not have a header, set the <code class="language-plaintext highlighter-rouge">header</code> argument to <code class="language-plaintext highlighter-rouge">FALSE</code>.</p>

<blockquote class="challenge">
  <h2 id="mis-loading-data-with-headers">Mis-loading data with headers</h2>

  <p>What happens if you forget to put <code class="language-plaintext highlighter-rouge">header = FALSE</code> when loading a <em>.csv</em>
file with <code class="language-plaintext highlighter-rouge">read.csv()</code>? The default value is <code class="language-plaintext highlighter-rouge">header = TRUE</code>, which you can 
check with <code class="language-plaintext highlighter-rouge">?read.csv</code> or <code class="language-plaintext highlighter-rouge">help(read.csv)</code>. What do you expect will happen if &gt; you leave the default value?</p>

  <p>Before you run any code, think about what will happen to the first few rows
of your data frame, and its overall size. Then run the following code and
see if your expectations agree:</p>

  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dat6</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'data/sample.csv'</span><span class="p">,</span><span class="w"> </span><span class="n">header</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">
</span><span class="n">head</span><span class="p">(</span><span class="n">dat6</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>

  <blockquote class="solution">
    <h2 id="solution-5">Solution</h2>

    <p>The <code class="language-plaintext highlighter-rouge">read.csv(...)</code> function sets the column names as the default values (<code class="language-plaintext highlighter-rouge">V1, V2, V3, ...</code>) and
treats the first row of the <code class="language-plaintext highlighter-rouge">sample.csv</code> file as the first row of data. Clearly this is not the
desired behavior for this data set, but it will be useful if you have a dataset without headers.
Note that the <code class="language-plaintext highlighter-rouge">V</code> is used to start the column names, since column names must follow
the usual variable naming rules, which would be violated with just a number.</p>
  </blockquote>
</blockquote>

<p> </p>
<h4 id="the-stringsasfactors-argument">The <code class="language-plaintext highlighter-rouge">stringsAsFactors</code> Argument</h4>

<p>The <code class="language-plaintext highlighter-rouge">stringsAsFactors</code> argument tells R whether to treat imported data represented by a text string as a <strong>character</strong> or <strong>factor</strong> data type. Up until R version 4.0 was released, I introduced the <code class="language-plaintext highlighter-rouge">stringsAsFactors</code> argument as one of the most important in <code class="language-plaintext highlighter-rouge">read.csv(...)</code>, particularly if you are working with categorical data. This is because the default behavior of R <em>used to be</em> to convert <strong>characters</strong> into <strong>factors</strong>. Because many relevant functions behave differently when confronted with a <strong>character</strong> vector than they do when confronted with a <strong>factor</strong>, this often resulted in unexpected behavior. In R 4.0 they updated the default behavior, and now strings of text are loaded as <strong>character</strong> data, rather than <strong>factors</strong>. This argument is still important, but the default behavior is now more intuitive and results in fewer frustrations.</p>

<p>The major problem is that, as previously discussed, <strong>factors</strong> do not let you add new data to a vector unless another element with that value us already present. As an example, let’s look at the <code class="language-plaintext highlighter-rouge">car-speeds.csv</code> data set. We find out that the data collector was color blind, and accidentally recorded green cars as being blue. In order to correct the data set, let’s replace ‘Blue’ with ‘Green’ in the <code class="language-plaintext highlighter-rouge">$Color</code> column:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># First - load the data with characters treated as factors and take a look at </span><span class="w">
</span><span class="c1"># what information is available</span><span class="w">
</span><span class="n">carSpeeds</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'data/car-speeds.csv'</span><span class="p">,</span><span class="w"> </span><span class="n">stringsAsFactors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span><span class="n">head</span><span class="p">(</span><span class="n">carSpeeds</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  Color Speed     State
1  Blue    32 NewMexico
2   Red    45   Arizona
3  Blue    35  Colorado
4 White    34   Arizona
5   Red    25   Arizona
6  Blue    41   Arizona
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Next use indexing to replace all `Blue` entries in the Color column with </span><span class="w">
</span><span class="c1"># 'Green'</span><span class="w">
</span><span class="n">carSpeeds</span><span class="o">$</span><span class="n">Color</span><span class="p">[</span><span class="n">carSpeeds</span><span class="o">$</span><span class="n">Color</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">'Blue'</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s1">'Green'</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext error highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Warning in `[&lt;-.factor`(`*tmp*`, carSpeeds$Color == "Blue", value =
structure(c(NA, : invalid factor level, NA generated
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">head</span><span class="p">(</span><span class="n">carSpeeds</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   Color Speed     State
1   &lt;NA&gt;    32 NewMexico
2    Red    45   Arizona
3   &lt;NA&gt;    35  Colorado
4  White    34   Arizona
5    Red    25   Arizona
6   &lt;NA&gt;    41   Arizona
7   &lt;NA&gt;    34 NewMexico
8  Black    29  Colorado
9  White    31   Arizona
10   Red    26  Colorado
</code></pre></div></div>

<p> </p>

<p>What happened? Because we loaded the colors of the cars (represented by text strings) as factors, <code class="language-plaintext highlighter-rouge">Green</code> was not included in the original set of colors. Thus it was not included as a level in the factor. When we tried to replace <code class="language-plaintext highlighter-rouge">Blue</code> with <code class="language-plaintext highlighter-rouge">Green</code>, R changed each value to <code class="language-plaintext highlighter-rouge">NA</code> because <code class="language-plaintext highlighter-rouge">Green</code> was not included as a valid factor level.</p>

<p>To see the internal structure, we can use another function, <code class="language-plaintext highlighter-rouge">str()</code>. In this case, the data frame’s internal structure includes the format of each column, which is what we are interested in.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">str</span><span class="p">(</span><span class="n">carSpeeds</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>'data.frame':	100 obs. of  3 variables:
 $ Color: Factor w/ 5 levels " Red","Black",..: NA 1 NA 5 4 NA NA 2 5 4 ...
 $ Speed: int  32 45 35 34 25 41 34 29 31 26 ...
 $ State: Factor w/ 4 levels "Arizona","Colorado",..: 3 1 2 1 1 1 3 2 1 2 ...
</code></pre></div></div>

<p> </p>

<p>We can see that the <code class="language-plaintext highlighter-rouge">$Color</code> and <code class="language-plaintext highlighter-rouge">$State</code> columns are factors and <code class="language-plaintext highlighter-rouge">$Speed</code> is a numeric column.</p>

<p>One way to solve this problem would be to add the <code class="language-plaintext highlighter-rouge">Green</code> level to the <code class="language-plaintext highlighter-rouge">Color</code> factor, but there is a simpler way. Let’s reload the dataset using <code class="language-plaintext highlighter-rouge">stringsAsFactors = FALSE</code>, and see what happens when we try to replace ‘Blue’ with <code class="language-plaintext highlighter-rouge">Green</code> in the <code class="language-plaintext highlighter-rouge">$Color</code> column:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># First - load the data and take a look at what information is available</span><span class="w">
</span><span class="n">carSpeeds</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'data/car-speeds.csv'</span><span class="p">,</span><span class="w"> </span><span class="n">stringsAsFactors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">
</span><span class="n">str</span><span class="p">(</span><span class="n">carSpeeds</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>'data.frame':	100 obs. of  3 variables:
 $ Color: chr  "Blue" " Red" "Blue" "White" ...
 $ Speed: int  32 45 35 34 25 41 34 29 31 26 ...
 $ State: chr  "NewMexico" "Arizona" "Colorado" "Arizona" ...
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Next use indexing to replace all `Blue` entries in the Color column with 'Green'</span><span class="w">
</span><span class="n">carSpeeds</span><span class="o">$</span><span class="n">Color</span><span class="p">[</span><span class="n">carSpeeds</span><span class="o">$</span><span class="n">Color</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">'Blue'</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s1">'Green'</span><span class="w">
</span><span class="n">carSpeeds</span><span class="o">$</span><span class="n">Color</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  [1] "Green" " Red"  "Green" "White" "Red"   "Green" "Green" "Black" "White"
 [10] "Red"   "Red"   "White" "Green" "Green" "Black" "Red"   "Green" "Green"
 [19] "White" "Green" "Green" "Green" "Red"   "Green" "Red"   "Red"   "Red"  
 [28] "Red"   "White" "Green" "Red"   "White" "Black" "Red"   "Black" "Black"
 [37] "Green" "Red"   "Black" "Red"   "Black" "Black" "Red"   "Red"   "White"
 [46] "Black" "Green" "Red"   "Red"   "Black" "Black" "Red"   "White" "Red"  
 [55] "Green" "Green" "Black" "Green" "White" "Black" "Red"   "Green" "Green"
 [64] "White" "Black" "Red"   "Red"   "Black" "Green" "White" "Green" "Red"  
 [73] "White" "White" "Green" "Green" "Green" "Green" "Green" "White" "Black"
 [82] "Green" "White" "Black" "Black" "Red"   "Red"   "White" "White" "White"
 [91] "White" "Red"   "Red"   "Red"   "White" "Black" "White" "Black" "Black"
[100] "White"
</code></pre></div></div>

<p> </p>

<p>That’s better! And we can see how the data now is read as character instead of factor.</p>

<p>Note that there are certainly times when we do want text strings represented by <strong>factor</strong> variable types. Recall the example in last week’s <em>On Your Own</em> section dealing with ordered categorical data. Just be aware of the data types present in your data frames and how they impact the way you interact with your data.</p>

<hr />
<h3 id="writing-tabular-data-to-a-file-csv-txt">Writing tabular data to a file (.csv, .txt)</h3>

<p>After altering our cars dataset by replacing ‘Blue’ with ‘Green’ in the <code class="language-plaintext highlighter-rouge">$Color</code> column, we now want to save the output. The <code class="language-plaintext highlighter-rouge">read.table(...)</code> function family has a corresponding set of <code class="language-plaintext highlighter-rouge">write.table(...)</code> functions. These functions have a familiar set of arguments:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">?</span><span class="n">read.table</span><span class="w">
</span></code></pre></div></div>

<p> </p>

<p>Here is the basic format for writing a table:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Export the data. The write.csv() function requires a minimum of two</span><span class="w">
</span><span class="c1"># arguments, the data to be saved and the name of the output file.</span><span class="w">
</span><span class="n">write.csv</span><span class="p">(</span><span class="n">carSpeeds</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'data/car-speeds-corrected.csv'</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>If you open the file, you’ll see that it has header names, because the data had headers within R, but that there are also numbers in the first column.</p>

<p><img src="../fig/01-supp-csv-with-row-nums.png" title="plot of chunk unnamed-chunk-38" alt="plot of chunk unnamed-chunk-38" width="350px" style="display: block; margin: auto auto auto 0;" /></p>

<p> </p>

<p>This extra column can cause problems when trying to open data in some other programs, and in most cases you won’t want to explicitly name the rows. This can be easily disabled with a simple argument:</p>

<p> </p>
<h4 id="the-rownames-argument">The <code class="language-plaintext highlighter-rouge">row.names</code> Argument</h4>

<p>This argument allows us to set the names of the rows in the output data file. R’s default for this argument is <code class="language-plaintext highlighter-rouge">TRUE</code>, and since it does not know what else to name the rows for the cars data set, it resorts to using row numbers. Unlike the recent change to the <code class="language-plaintext highlighter-rouge">stringsAsFactors</code> argument for reading data, this is an argument that defaults to something that is non-intuitive. To turn row names/numbers off, we can set <code class="language-plaintext highlighter-rouge">row.names</code> to <code class="language-plaintext highlighter-rouge">FALSE</code>:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">write.csv</span><span class="p">(</span><span class="n">carSpeeds</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'data/car-speeds-cleaned.csv'</span><span class="p">,</span><span class="w"> </span><span class="n">row.names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p> </p>

<p>Now we see:</p>

<p><img src="../fig/01-supp-csv-without-row-nums.png" title="plot of chunk unnamed-chunk-40" alt="plot of chunk unnamed-chunk-40" width="350px" style="display: block; margin: auto auto auto 0;" /></p>

<p> </p>

<blockquote class="callout">
  <h2 id="setting-column-names">Setting column names</h2>

  <p>There is also a <code class="language-plaintext highlighter-rouge">col.names</code> argument, which can be used to set the column
names for a data set without headers. If the data set already has headers
(e.g. we used the <code class="language-plaintext highlighter-rouge">headers = TRUE</code> argument when importing the data) then a
<code class="language-plaintext highlighter-rouge">col.names</code> argument will be ignored.</p>
</blockquote>

<p> </p>
<h4 id="the-na-argument">The <code class="language-plaintext highlighter-rouge">na</code> Argument</h4>

<p>By default, R will export missing data in a dataset as <code class="language-plaintext highlighter-rouge">NA</code>. There are times when we want to specify certain values for missing data in our datasets (e.g. when we are going to pass the data to a program that only accepts <code class="language-plaintext highlighter-rouge">-9999</code> or <code class="language-plaintext highlighter-rouge">NaN</code> as a “no data available” value). In this case, we want to set the <code class="language-plaintext highlighter-rouge">NA</code> value of our output file to the desired value, using the <code class="language-plaintext highlighter-rouge">na</code> argument. Let’s see how this works:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># First, replace the speed in the 3rd row with NA, by using an index (square</span><span class="w">
</span><span class="c1"># brackets to indicate the position of the value we want to replace)</span><span class="w">
</span><span class="n">carSpeeds</span><span class="o">$</span><span class="n">Speed</span><span class="p">[</span><span class="m">3</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="n">head</span><span class="p">(</span><span class="n">carSpeeds</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  Color Speed     State
1 Green    32 NewMexico
2   Red    45   Arizona
3 Green    NA  Colorado
4 White    34   Arizona
5   Red    25   Arizona
6 Green    41   Arizona
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">write.csv</span><span class="p">(</span><span class="n">carSpeeds</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'data/car-speeds-corrected-na.csv'</span><span class="p">,</span><span class="w"> </span><span class="n">row.names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p> </p>

<p>Now we’ll set <code class="language-plaintext highlighter-rouge">NA</code> to -9999 when we write the new <em>.csv</em> file:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Note - the na argument requires a string input</span><span class="w">
</span><span class="n">write.csv</span><span class="p">(</span><span class="n">carSpeeds</span><span class="p">,</span><span class="w">
          </span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'data/car-speeds-corrected-9999.csv'</span><span class="p">,</span><span class="w">
          </span><span class="n">row.names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w">
          </span><span class="n">na</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'-9999'</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p> </p>

<p>And we see:</p>

<p><img src="../fig/01-supp-csv-with-special-NA.png" title="plot of chunk unnamed-chunk-43" alt="plot of chunk unnamed-chunk-43" width="350px" style="display: block; margin: auto auto auto 0;" /></p>

<hr />



<blockquote class="keypoints">
  <h2>Key Points</h2>
  <ul>
    
    <li><p>All the indexing and subsetting that works on matrices also works on data frames.</p>
</li>
    
    <li><p>Use <code class="language-plaintext highlighter-rouge">object[x, y]</code> to select a single element from a data frame.</p>
</li>
    
    <li><p>Each column of a data frame can be directly addressed by specifying the column name using the <code class="language-plaintext highlighter-rouge">$</code> operator (e.g. <code class="language-plaintext highlighter-rouge">mydataframe$column1</code>).</p>
</li>
    
    <li><p>Data in data structures can by accessed by specifying the appropriate index, by logical vector, or by column/row name (if defined).</p>
</li>
    
    <li><p>Import data from a .csv or .txt file using the <code class="language-plaintext highlighter-rouge">read.table(...)</code>, <code class="language-plaintext highlighter-rouge">read.csv(...)</code>, and <code class="language-plaintext highlighter-rouge">read.delim(...)</code> functions.</p>
</li>
    
    <li><p>Write data to a new .csv or .txt file using the <code class="language-plaintext highlighter-rouge">write.table(...)</code> and <code class="language-plaintext highlighter-rouge">write.csv(...)</code> functions.</p>
</li>
    
  </ul>
</blockquote>

</article>
















<div class="row">
  <div class="col-xs-1">
    <h3 class="text-left">
      
      <a href="../02-oyo-R-data-types-in-depth/index.html"><span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span><span class="sr-only">previous episode</span></a>
      
    </h3>
  </div>
  <div class="col-xs-10">
    
  </div>
  <div class="col-xs-1">
    <h3 class="text-right">
      
      <a href="../03-oyo-Lists/index.html"><span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span><span class="sr-only">next episode</span></a>
      
    </h3>
  </div>
</div>


      
      






<footer>
  <!--<div class="row">
    <div class="col-md-6 copyright" align="left">
	
    </div>
    <div class="col-md-6 help-links" align="right">
	
	
	<a href="/edit//_episodes_rmd/03-class-data-frames.Rmd">Edit on GitHub</a>
	
	
	/
	<a href="/blob//CONTRIBUTING.md">Contributing</a>
	/
	<a href="/">Source</a>
	/
	<a href="/blob//CITATION">Cite</a>
	/
	<a href="mailto:sutphin@gmail.com">Contact</a>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12" align="center">
      Using <a href="https://github.com/carpentries/styles/">The Carpentries style</a>
      version <a href="https://github.com/carpentries/styles/releases/tag/v9.5.3">9.5.3</a>.
    </div>
  </div>-->
</footer>

      
    </div>
    
<script src="../assets/js/jquery.min.js"></script>
<script src="../assets/js/bootstrap.min.js"></script>
<script src="../assets/js/lesson.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-37305346-2', 'auto');
  ga('send', 'pageview');
</script>
<!--<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>-->
<script type="text/javascript"
src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

  </body>
</html>
